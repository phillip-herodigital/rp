@model StreamEnergy.MyStream.Models.Marketing.UsageCalculator
@using Sitecore.Mvc.Extensions
@functions{
    Sitecore.Data.Items.Item dataCalculator = Sitecore.Context.Database.GetItem("/sitecore/content/Data/Components/Marketing/Mobile/Mobile Usage Calculator");

    string GetFieldValue(string key)
    {
        return dataCalculator.Fields[key] != null ? dataCalculator.Fields[key].Value : "";
    }
}
@if(Model.IsModal)
{
    <div class="modal-header">
        @GetFieldValue("Modal Header")
    </div>
    @Html.Raw("<div class=\"modal-body scrollable\">")
}

<article class="marketing mobile tabs mobile-plans-usage-calculator" ng-controller="MobileUsageCalculatorCtrl" ng-init="init(@(Html.Action("GetUsageCalculatorData", "Marketing").ToHtmlString()))">
    
    <script>
        var UsageCalculator = {
            tabs: [
                {
                    title: '@GetFieldValue("Connect Account Tab")',
                    url: 'connect.tpl.html'
                }@if (Model.ShowManualCalculator) {@:,
                @:{
                    @:title: '@GetFieldValue("Manually Enter Tab")',
                    @:url: 'manual.tpl.html'
                @:}
                }
            ],
            currentTab: '@(Model.ShowBillScrape ? "connect.tpl.html" : "manual.tpl.html")',
            isModal:    '@Model.IsModal'.toLowerCase() == 'true'
        };
    </script>

    <div class="wrapper">
        <h1 ng-show="!isModal">@GetFieldValue("Header")</h1>
        <div class="tab-wrapper">
            @if (Model.ShowBillScrape)
            {
                <ul class="tabbed-header">
                    <li class="tab"
                        ng-repeat="tab in tabs"
                        ng-class="{active:isActiveTab(tab.url)}"
                        ng-click="onClickTab(tab)">{{tab.title}}</li>
                    <li class="tab inactive" ng-if="tabs.length < 2"></li>
                </ul>
            }
            <div class="content" loading-indicator>
                <div ng-include="currentTab"></div>
            </div>
        </div>
        <script type="text/ng-template" id="connect.tpl.html">
            <div class="login" ng-show="!connected">
                @GetFieldValue("Connect Account Intro Text")
                <div class="select-carrier clearfix">
                    <h2>@GetFieldValue("Connect Account Header")</h2>
                    <div class="selectCarrierText col pull-left">
                        <h4>@GetFieldValue("Select Current Carrier")</h4>
                    </div>
                    <div class="col pull-left">
                        <ul class="network-toggle">
                            <li ng-repeat="item in serverData.carriers">
                                <a href="" class="{{item.key}}" ng-class="{active: connect.carrier == item.key}" ng-click="connect.carrier = item.key">
                                    {{ item.name }}
                                    @*<i ng-class="{'icon-att': item.key == 'att','icon-sprint': item.key == 'sprint','icon-verizon': item.key == 'vzw','icon-tmobile': item.key == 'tmo'}"></i>*@
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                @*<div class="selectCarrier clearfix">
                    @GetFieldValue("Bill Analysis Text")
                </div>*@
                <div class="stretch coming-soon" ng-if="connect.carrier && !getCarrier(connect.carrier).showLogin">
                    @GetFieldValue("Carrier Coming Soon")
                </div>
                <form ng-if="connect.carrier && getCarrier(connect.carrier).showLogin" ng-submit="callValidas()" data-val-bind-messages="validations">
                    {{validations}}
                    <div class="loginFields grid cols-2">
                        <div class="group col two-third">
                            <div class="notice error" ng-show="validasErrors" ng-cloak>
                                <p ng-repeat="error in validasErrors">{{ error }}</p>
                            </div>
                            @Html.ValidationSummary()
                            <div @Html.Validation().ErrorClass(m => m.AgreeToTerms)>
                                <p class="terms">
                                    @Html.CheckBoxFor(m => m.AgreeToTerms, new { ng_model = "connect.acceptTermsCheckbox" }) <label for="@Html.IdFor(m => m.AgreeToTerms)">@GetFieldValue("Agree text")</label>
                                </p>
                            </div>
                            @GetFieldValue("Log In Text")
                            <div class="item" @Html.Validation().ErrorClass(model => model.Username)>
                                <label for="@Html.IdFor(m => m.Username)">@GetFieldValue("Username")</label>
                                @Html.TextBoxFor(m => m.Username, new { ng_model = "connect.username" })
                            </div>
                            <div class="item" @Html.Validation().ErrorClass(model => model.Password)>
                                <label for="@Html.IdFor(m => m.Password)">@GetFieldValue("Password")</label>
                                @Html.PasswordFor(m => m.Password, new { ng_model = "connect.password" })
                            </div>
                            <div class="item" ng-if="connect.carrier == 'vzw'" @Html.Validation().ErrorClass(model => model.SecurityQuestionAnswer)>
                                <label for="@Html.IdFor(m => m.SecurityQuestionAnswer)">@GetFieldValue("Security Question")</label>
                                @Html.PasswordFor(m => m.SecurityQuestionAnswer, new { ng_model = "connect.securityAnswer" })
                            </div>
                            <span class="note forgot-username-password" ng-if="connect.carrier == 'att'">@GetFieldValue("ATT Forgot Username or Password")</span>
                            <span class="note forgot-username-password" ng-if="connect.carrier == 'sprint'">@GetFieldValue("Sprint Forgot Username or Password")</span>
                            <span class="note forgot-username-password" ng-if="connect.carrier == 'vzw'">@GetFieldValue("Verizon Forgot Username or Password")</span>
                            <span class="note forgot-username-password" ng-if="connect.carrier == 'tmo'">@GetFieldValue("TMobile Forgot Username or Password")</span>
                        </div>
                        <div class="col one-third">
                            <div class="note-text">
                                @GetFieldValue("Note Text")
                            </div>
                            <div class="item disallowed-account">
                                @GetFieldValue("Disallowed Account Text")
                            </div>
                        </div>
                    </div>
                    <div class="buttons">
                        <button type="submit" data-val-submit>@GetFieldValue("Calculate Savings")</button>
                    </div>
                </form>
            </div>
            <div class="bill-scrape" ng-show="connected">

                <div class="grid message-table">
                    <div class="table-row">
                        <div class="table-cell">
                            @GetFieldValue("Success Message")
                        </div>
                    </div>
                    <div class="table-row">
                        <div class="table-cell">
                            @GetFieldValue("Were Showing")
                            <strong>
                                <span ng-bind="connect.validas.phoneLines"></span>
                                <span ng-show="connect.validas.phoneLines == 1">@GetFieldValue("Line")</span>
                                <span ng-show="connect.validas.phoneLines > 1">@GetFieldValue("Lines")</span>
                            </strong>
                            @GetFieldValue("Averaged")
                            <strong><span ng-bind="(connect.validas.averageMonthlyData / 1000) | trimNumber:2"></span>GB</strong>@GetFieldValue("Per Month")
                            @GetFieldValue("At A Price Of")
                            <strong><span ng-bind="connect.validas.averageMonthlyCost | currency"></span></strong>@GetFieldValue("Per Month").
                            <a href='#' ng-click="resetConnect()">@GetFieldValue("Login With A Different Account")</a>
                        </div>
                    </div>
                </div>

                <div class="grid savingsAnalysis">
                    <h3>@GetFieldValue("Savings Analysis")</h3>
                </div>
                <div class="stretch">
                     <div class="plans-table-wrapper">
                        <div class="plans-table-two-thirds">
                            <div class="plan-table">
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Network Provider")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <i ng-class="{'icon-att': connect.validas.network == 'att','icon-sprint': connect.validas.network == 'sprint','icon-verizon': connect.validas.network == 'vzw','icon-tmobile': connect.validas.network == 'tmo'}"></i>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <div class="mobile-network">
                                            <i class="icon-cdma"></i>
                                            <h2>@GetFieldValue("Network")</h2>
                                        </div>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <div class="mobile-network">
                                            <i class="icon-gsm"></i>
                                            <h2>@GetFieldValue("Network")</h2>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Coverage Map")
                                    </div>
                                    <div class="table-cell current-plan">
                                        @GetFieldValue("NA")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        @GetFieldValue("Nationwide CDMA Network")
                                        <a href="/services/mobile/coverage-map#?carrier=sprint">@GetFieldValue("Launch Coverage Map")</a>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        @GetFieldValue("Nationwide GSM Network")
                                        <a href="/services/mobile/coverage-map#?carrier=att">@GetFieldValue("Launch Coverage Map")</a>
                                    </div>
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Phone Lines")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span ng-bind="connect.validas.phoneLines"></span> @GetFieldValue("Lines")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <span ng-bind="connect.validas.phoneLines"></span> @GetFieldValue("Lines")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <span ng-bind="connect.validas.phoneLines"></span> @GetFieldValue("Lines")
                                    </div>
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Monthly Data")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span ng-bind="(connect.validas.averageMonthlyData / 1000) | trimNumber:2"></span> GB
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <span ng-bind="getValidasRecommendation('sprint').data"></span> GB
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <span ng-bind="getValidasRecommendation('att').data"></span> GB
                                    </div>
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Text And Talk")
                                    </div>
                                    <div class="table-cell current-plan">
                                        @GetFieldValue("NA")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        @GetFieldValue("Unlimited")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        @GetFieldValue("Unlimited")
                                    </div>
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Monthly Cost")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span ng-bind="connect.validas.averageMonthlyCost | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <span ng-bind="getMonthlyTotal(getValidasRecommendation('sprint').planId) | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <span ng-bind="getMonthlyTotal(getValidasRecommendation('att').planId) | currency"></span>
                                    </div>
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Total Cost over")
                                        <select ng-model="formData.selectedTimeframe" ng-options="item.months as item.label for item in timeframe"></select><br />
                                        @*<a href="" class="hideBreakdown" ng-click="showBreakdown = !showBreakdown">
                                            <span ng-if="showBreakdown">@GetFieldValue("hide breakdown")</span>
                                            <span ng-if="!showBreakdown">@GetFieldValue("show breakdown")</span>
                                        </a>*@
                                    </div>
                                    <div class="table-cell current-plan">
                                        {{ connect.validas.averageMonthlyCost * formData.selectedTimeframe | currency }}
                                        <span class="note">({{ connect.validas.averageMonthlyCost | currency }} x {{ formData.selectedTimeframe }} @GetFieldValue("Months"))</span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        {{ getMonthlyTotal(getValidasRecommendation('sprint').planId) * formData.selectedTimeframe | currency }}
                                        <span class="note">({{ getMonthlyTotal(getValidasRecommendation('sprint').planId) | currency }} x {{ formData.selectedTimeframe }} @GetFieldValue("Months"))</span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        {{ getMonthlyTotal(getValidasRecommendation('att').planId) * formData.selectedTimeframe | currency }}
                                        <span class="note">({{ getMonthlyTotal(getValidasRecommendation('att').planId) | currency }} x {{ formData.selectedTimeframe }} @GetFieldValue("Months"))</span>
                                    </div>
                                    @*<div class="table-cell tco current-plan">
                                        <span class="bar" ng-style="{'height': getTCOHeight('currentPlan') }" ng-bind="calculateTCO('currentPlan') | currency"></span>
                                    </div>
                                    <div class="table-cell tco" ng-show="hasRecommendationForCarrier('sprint')">
                                        <span class="savings" ng-show="calculateTCO('currentPlan') > calculateTCO('sprint')"><span ng-bind="calculateTCO('currentPlan') - calculateTCO('sprint') | currency"></span> @GetFieldValue("Savings")</span><br />
                                        <span class="bar" ng-style="{'height': getTCOHeight('sprint') }" ng-bind="calculateTCO('sprint') | currency"></span>
                                    </div>
                                    <div class="table-cell tco" ng-show="hasRecommendationForCarrier('att')">
                                        <span class="savings" ng-show="calculateTCO('currentPlan') > calculateTCO('att')"><span ng-bind="calculateTCO('currentPlan') - calculateTCO('att') | currency"></span> @GetFieldValue("Savings")</span><br />
                                        <span class="bar" ng-style="{'height': getTCOHeight('att') }" ng-bind="calculateTCO('att') | currency"></span>
                                    </div>*@
                                </div>
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Savings Over 2 Years")
                                    </div>
                                    <div class="table-cell tco current-plan"></div>
                                    <div class="table-cell tco" ng-show="hasRecommendationForCarrier('sprint')" ng-class="{savings:(getTotalSavings('sprint') > 0),cost:!(getTotalSavings('sprint') > 0)}">
                                        <span ng-bind="getTotalSavings('sprint') | currency"></span>
                                    </div>
                                    <div class="table-cell tco" ng-show="hasRecommendationForCarrier('att')" ng-class="{savings:(getTotalSavings('att') > 0),cost:!(getTotalSavings('att') > 0)}">
                                        <span ng-bind="getTotalSavings('att') | currency"></span>
                                    </div>
                                </div>                        
                            </div>
                            <div class="plan-table">
                                <div class="table-row single-cell">
                                    <div class="full-row">
                                        <strong>@GetFieldValue("Fees To Switch")</strong>
                                    </div>
                                </div>
                                <div class="table-row" ng-show="showBreakdown">
                                    <div class="table-cell label">
                                        @GetFieldValue("Early Termination Fee")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span ng-bind="connect.validas.totalEtf | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        @GetFieldValue("NA")   
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        @GetFieldValue("NA")
                                    </div>
                                </div>
                                <div class="table-row" ng-show="showBreakdown">
                                    <div class="table-cell label">
                                        @GetFieldValue("Leased Device Payoff Fee")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span ng-bind="connect.validas.leasedPayoffFee | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        @GetFieldValue("NA")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        @GetFieldValue("NA")
                                    </div>
                                </div>
                                <div class="table-row" ng-show="showBreakdown">
                                    <div class="table-cell label">
                                        @GetFieldValue("Activation Fee")
                                    </div>
                                    <div class="table-cell current-plan">
                                        @GetFieldValue("NA")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <div class="activationFee">
                                            <span ng-bind="(connect.validas.phoneLines * getCarrier('sprint').fees.activationFee) | currency"></span>
                                            <span ng-show="connect.validas.phoneLines > 1">( <span ng-bind="connect.validas.phoneLines"></span> @GetFieldValue("Lines") )</span>
                                        </div>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <div class="activationFee">
                                            <span ng-bind="(connect.validas.phoneLines * getCarrier('att').fees.activationFee) | currency"></span>
                                            <span ng-show="connect.validas.phoneLines > 1">( <span ng-bind="connect.validas.phoneLines"></span> @GetFieldValue("Lines") )</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="table-row" ng-show="showBreakdown">
                                    <div class="table-cell label">
                                        @GetFieldValue("Total Fees")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span ng-bind="connect.validas.leasedPayoffFee + connect.validas.totalEtf | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <div class="activationFee">
                                            <span ng-bind="(connect.validas.phoneLines * getCarrier('sprint').fees.activationFee) | currency"></span>
                                        </div>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <div class="activationFee">
                                            <span ng-bind="(connect.validas.phoneLines * getCarrier('att').fees.activationFee) | currency"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="plan-table">
                                <div class="table-row single-cell">
                                    <div class="full-row"></div>
                                </div>
                                <div class="table-row" ng-show="showBreakdown">
                                    <div class="table-cell label">
                                        @GetFieldValue("Trade Value")
                                    </div>
                                    <div class="table-cell current-plan">
                                        @GetFieldValue("NA")
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <span ng-bind="connect.validas.tradeInValue | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <span ng-bind="connect.validas.tradeInValue | currency"></span>
                                    </div>
                                </div>                        
                                <div class="table-row net-savings" ng-show="showBreakdown && (totalSavingsForCarrier('sprint') || totalSavingsForCarrier('att'))">
                                    <div class="table-cell label">
                                        @GetFieldValue("Net Savings Cost")
                                    </div>
                                    <div class="table-cell current-plan">
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')" ng-class="{savings:hasSavingsForCarrier('sprint'),cost:!hasSavingsForCarrier('sprint')}">
                                        <span ng-bind="totalSavingsForCarrier('sprint') | currency"></span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')" ng-class="{savings:hasSavingsForCarrier('att'),cost:!hasSavingsForCarrier('att')}">
                                        <span ng-bind="totalSavingsForCarrier('att') | currency"></span>
                                    </div>
                                </div> 
                                <div class="table-row">
                                    <div class="table-cell label">
                                        @GetFieldValue("Plan Selection")
                                    </div>
                                    <div class="table-cell current-plan">
                                        <span class="currentPlan">@GetFieldValue("Current Plan")</span>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                        <a ng-href="/enrollment?ServiceType=Mob&amp;mobilePlanId={{getValidasRecommendation('sprint').planId}}&amp;SPID={{SPID}}&amp;BC_ID={{BC_ID}}&amp;RefSite={{RefSite}}&amp;AccountType={{AccountType}}" class="button">@GetFieldValue("Select Sprint Plan")</a>
                                    </div>
                                    <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                        <a ng-href="/enrollment?ServiceType=Mob&amp;mobilePlanId={{getValidasRecommendation('att').planId}}&amp;SPID={{SPID}}&amp;BC_ID={{BC_ID}}&amp;RefSite={{RefSite}}&amp;AccountType={{AccountType}}" class="button">@GetFieldValue("Select ATT Plan")</a>
                                    </div>
                                </div>
                            </div>
                            <div class="plan-table">
                                <div class="table-row single-cell table-footnote">
                                    <div class="full-row">
                                        @GetFieldValue("Trade In Note")
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div class="plans-table-one-third" ng-if="!hasRecommendationForCarrier('att') && !hasRecommendationForCarrier('sprint')">
                             @GetFieldValue("Usage Exceeded Text")
                         </div>
                    </div>
                </div>
            </div>
        </script>

        <script type="text/ng-template" id="manual.tpl.html">
            @if (Model.ShowManualCalculator)
            {
            <div class="manual-calculator">
                <h4>@GetFieldValue("Use Calculator Text")</h4>      
                <div class="grid">
                    <div class="col left clearfix">
                        <div class="icon pull-left">
                            <i class="icon-device"></i>
                        </div>
                        <div class="pull-left">
                            @GetFieldValue("Number of Phone Lines")
                        </div>
                    </div>
                    <div class="col right numLines">
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 1}" ng-click="manualCalculator.lines = 1">1</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 2}" ng-click="manualCalculator.lines = 2">2</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 3}" ng-click="manualCalculator.lines = 3">3</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 4}" ng-click="manualCalculator.lines = 4">4</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 5}" ng-click="manualCalculator.lines = 5">5</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 6}" ng-click="manualCalculator.lines = 6">6</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 7}" ng-click="manualCalculator.lines = 7">7</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 8}" ng-click="manualCalculator.lines = 8">8</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 9}" ng-click="manualCalculator.lines = 9">9</div>
                        <div class="button lineButton" ng-class="{active: manualCalculator.lines == 10}" ng-click="manualCalculator.lines = 10">10</div>
                    </div>
                </div>
                <div class="grid">
                    <div class="col left clearfix">
                        <div class="pull-right">
                            <select ng-model="manualCalculator.timeframe.emails" style="width: 90px;">
                                <option value="month">Month</option>
                                <option value="day">Day</option>
                            </select>
                        </div>
                        <div class="icon pull-left">
                            <i class="icon-email-small"></i>
                        </div>
                        <div class="pull-left data-description">
                            @GetFieldValue("Emails Sent Received")<br />
                            @GetFieldValue("No Attachments Text")
                        </div>
                    </div>
                    <div class="col right">
                        <div class="slider" ui-slider="getSliderOptions('emails')" ng-model="manualCalculator.emails">
                            <div class="slider-tick slider-tick-25"></div>
                            <div class="slider-tick slider-tick-50"></div>
                            <div class="slider-tick slider-tick-75"></div>
                        </div>
                        <div class="sliderLabels">
                            <span class="none">@GetFieldValue("Email None Text")</span>
                            <span class="some">@GetFieldValue("Email Some Text")</span>
                            <span class="alot">@GetFieldValue("Email A Lot Text")</span>
                        </div>
                    </div>
                </div>
                <div class="grid">
                    <div class="col left clearfix">
                        <div class="pull-right">
                            <select ng-model="manualCalculator.timeframe.pictures" style="width: 90px;">
                                <option value="month">Month</option>
                                <option value="day">Day</option>
                            </select>
                        </div>
                        <div class="icon pull-left">
                            <i class="icon-picture"></i>
                        </div>
                        <div class="pull-left data-description">
                            @GetFieldValue("Uploaded Pictures")<br />
                            @GetFieldValue("Posting Pictures Text")
                        </div>
                    </div>
                    <div class="col right">
                        <div class="slider" ui-slider="getSliderOptions('pictures')" ng-model="manualCalculator.pictures">
                            <div class="slider-tick slider-tick-25"></div>
                            <div class="slider-tick slider-tick-50"></div>
                            <div class="slider-tick slider-tick-75"></div>
                        </div>
                        <div class="sliderLabels">
                            <span class="none">@GetFieldValue("Pictures None Text")</span>
                            <span class="some">@GetFieldValue("Pictures Some Text")</span>
                            <span class="alot">@GetFieldValue("Pictures A Lot Text")</span>
                        </div>
                    </div>
                </div>
                <div class="grid">
                    <div class="col left clearfix">
                        <div class="pull-right">
                            <select ng-model="manualCalculator.timeframe.music" style="width: 90px;">
                                <option value="month">Month</option>
                                <option value="day">Day</option>
                            </select>
                        </div>
                        <div class="icon pull-left">
                            <i class="icon-music"></i>
                        </div>
                        <div class="pull-left data-description">
                            @GetFieldValue("Streaming Music")<br />
                            @GetFieldValue("Music Services Text")
                        </div>
                    </div>
                    <div class="col right">
                        <div class="slider" ui-slider="getSliderOptions('music')" ng-model="manualCalculator.music">
                            <div class="slider-tick slider-tick-25"></div>
                            <div class="slider-tick slider-tick-50"></div>
                            <div class="slider-tick slider-tick-75"></div>
                        </div>
                        <div class="sliderLabels">
                            <span class="none">@GetFieldValue("Music None Text")</span>
                            <span class="some">@GetFieldValue("Music Some Text")</span>
                            <span class="alot">@GetFieldValue("Music A Lot Text")</span>
                        </div>
                    </div>
                </div>
                <div class="grid">
                    <div class="col left clearfix">
                        <div class="pull-right">
                            <select ng-model="manualCalculator.timeframe.video" style="width: 90px;">
                                <option value="month">Month</option>
                                <option value="day">Day</option>
                            </select>
                        </div>
                        <div class="icon pull-left">
                            <i class="icon-video"></i>
                        </div>
                        <div class="pull-left data-description">
                            @GetFieldValue("Stream Video")<br />
                            @GetFieldValue("Stream Services Text")
                        </div>
                    </div>
                    <div class="col right">
                        <div class="slider" ui-slider="getSliderOptions('video')" ng-model="manualCalculator.video">
                            <div class="slider-tick slider-tick-25"></div>
                            <div class="slider-tick slider-tick-50"></div>
                            <div class="slider-tick slider-tick-75"></div>
                        </div>
                        <div class="sliderLabels">
                            <span class="none">@GetFieldValue("Video None Text")</span>
                            <span class="some">@GetFieldValue("Video Some Text")</span>
                            <span class="alot">@GetFieldValue("Video A Lot Text")</span>
                        </div>
                    </div>
                </div>
                <div class="grid">
                    <div class="col left clearfix">
                        <div class="pull-right">
                            <select ng-model="manualCalculator.timeframe.surfing" style="width: 90px;">
                                <option value="month">Month</option>
                                <option value="day">Day</option>
                            </select>
                        </div>
                        <div class="icon pull-left">
                            <i class="icon-web"></i>
                        </div>
                        <div class="pull-left data-description">
                            @GetFieldValue("Web Surfing")<br />
                            @GetFieldValue("Web Pages Text")
                        </div>
                    </div>
                    <div class="col right">
                        <div class="slider" ui-slider="getSliderOptions('surfing')" ng-model="manualCalculator.surfing">
                            <div class="slider-tick slider-tick-25"></div>
                            <div class="slider-tick slider-tick-50"></div>
                            <div class="slider-tick slider-tick-75"></div>
                        </div>
                        <div class="sliderLabels">
                            <span class="none">@GetFieldValue("Web Surfing None Text")</span>
                            <span class="some">@GetFieldValue("Web Surfing Some Text")</span>
                            <span class="alot">@GetFieldValue("Web Surfing A Lot Text")</span>
                        </div>
                    </div>
                </div>
                <div class="suggestion row" ng-class="{grid: isModal}">
                    <span class="suggestionText">@GetFieldValue("Based on your estimated usage")</span>
                    <div class="estimatedData">
                        <div class="frame">
                            <div class="recommended" ng-style="{width: calculatorRecommendationInPct() + '%'}" ng-show="calculatorTotalInGB(10) > 0">
                                <span class="label">@GetFieldValue("Recommended Data")</span>
                            </div>
                            <div class="estimate" ng-style="{width: calculatorTotalInPct() + '%'}"></div>
                            <div class="estimatedDataLabel" ng-style="{left: estimateLabelLeft() + 'px'}">
                                @GetFieldValue("Estimated Usage"): <span ng-bind="calculatorTotalInGB()"></span>GB
                            </div>
                        </div>
                        <div class="dataLabels">
                            <div class="dataLabel">
                                0GB
                            </div>
                            <div class="dataLabel">
                                2GB
                            </div>
                            <div class="dataLabel">
                                4GB
                            </div>
                            <div class="dataLabel">
                                6GB
                            </div>
                            <div class="dataLabel">
                                8GB
                                <span class="pull-right">
                                    @GetFieldValue("Unlimited")
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="grid" ng-show="isModal">
                    <div class="col right addToCart">
                        <a ng-href="/enrollment?ServiceType=Mob&amp;mobilePlanId={{getManualRecommendation('sprint').planId}}&amp;SPID={{SPID}}&amp;BC_ID={{BC_ID}}&amp;RefSite={{RefSite}}&amp;AccountType={{AccountType}}" class="button">@GetFieldValue("Modal Button Text")</a>
                    </div>
                </div>
                <div class="stretch" ng-show="!isModal">
                    <div ng-show="!hasRecommendationForCarrier('sprint') && !hasRecommendationForCarrier('att')">
                        <div class="content">
                            @GetFieldValue("No Plans Available")
                        </div>
                    </div>
                    <div class="plan-table" ng-show="hasRecommendationForCarrier('sprint') || hasRecommendationForCarrier('att')">
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Network Provider")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                <div class="mobile-network">
                                    <i class="icon-cdma"></i>
                                    <h2>@GetFieldValue("Network")</h2>
                                </div>
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                <div class="mobile-network">
                                    <i class="icon-gsm"></i>
                                    <h2>@GetFieldValue("Network")</h2>
                                </div>
                            </div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Coverage Map")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                @GetFieldValue("Nationwide CDMA Network")
                                <a href="/services/mobile/coverage-map#?carrier=sprint">@GetFieldValue("Launch Coverage Map")</a>
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                @GetFieldValue("Nationwide GSM Network")
                                <a href="/services/mobile/coverage-map#?carrier=att">@GetFieldValue("Launch Coverage Map")</a>
                            </div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Phone Lines")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                <span ng-bind="manualCalculator.lines"></span>
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                <span ng-bind="manualCalculator.lines"></span>
                            </div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Monthly Data")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                <div ng-show="getManualRecommendation('sprint').data < 1000000">
                                    <span ng-bind="getManualRecommendation('sprint').data"></span> GB
                                </div>
                                <div ng-show="getManualRecommendation('sprint').data == 1000000">
                                    @GetFieldValue("Unlimited")
                                </div>
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                <div ng-show="getManualRecommendation('att').data < 1000000">
                                    <span ng-bind="getManualRecommendation('att').data"></span> GB
                                </div>
                                <div ng-show="getManualRecommendation('att').data == 1000000">
                                    @GetFieldValue("Unlimited")
                                </div>
                            </div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Text And Talk")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                @GetFieldValue("Unlimited")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                @GetFieldValue("Unlimited")
                            </div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Monthly Cost")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                <span ng-bind="getMonthlyTotal(getManualRecommendation('sprint').planId) | currency"></span>
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                <span ng-bind="getMonthlyTotal(getManualRecommendation('att').planId) | currency"></span>
                            </div>
                        </div>
                        <div class="table-row">
                            <div class="table-cell label">
                                @GetFieldValue("Plan Selection")
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('sprint')">
                                <a ng-href="/enrollment?ServiceType=Mob&amp;mobilePlanId={{getManualRecommendation('sprint').planId}}&amp;SPID={{SPID}}&amp;BC_ID={{BC_ID}}&amp;RefSite={{RefSite}}&amp;AccountType={{AccountType}}" class="button">@GetFieldValue("Select Sprint Plan")</a>
                            </div>
                            <div class="table-cell" ng-show="hasRecommendationForCarrier('att')">
                                <a ng-href="/enrollment?ServiceType=Mob&amp;mobilePlanId={{getManualRecommendation('att').planId}}&amp;SPID={{SPID}}&amp;BC_ID={{BC_ID}}&amp;RefSite={{RefSite}}&amp;AccountType={{AccountType}}" class="button">@GetFieldValue("Select ATT Plan")</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            }
            else
            {
                @GetFieldValue("Manual Calculator Disabled")
            }
        </script>
    </div>
</article>
@if(Model.IsModal)
{
    @Html.Raw("</div>")
}
