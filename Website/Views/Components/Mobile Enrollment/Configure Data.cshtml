<div id="phoneFlowPlans" class="enrollment" ng-show="stepsService.isStepVisible('phoneFlowPlans')" ng-controller="MobileEnrollmentConfigureDataCtrl" ng-init="setTimeRemaining('phoneFlowPlans', '@Html.Sitecore().Field("Remaining Minutes Number")');">
    @*<div class="banner enrollment__banner" style="@Html.AsBackgroundStyle("Mobile Banner Image")">
        <div class="wrapper">
            <h1>
                <span class="block">@Html.Sitecore().Field("Page Title")</span><br />
            </h1>
        </div>
    </div>*@
    @* Two-column layout for Configure Data *@
    <div class="layout plan-selection">
        <div class="wrapper cols-2">
            <section>
                <div class="notice alert" ng-show="mobileEnrollment.requestedPlanId != '' && !requestedPlanAvailable">
                    @Html.Sitecore().Field("Requested Plan Unavailable")
                </div>
                <article class="enrollment__box enrollment__configure-data">
                    <header>
                        @*<h1>@Html.Sitecore().Field("Header - Select Data Amount")</h1>*@
                        <h3>@Html.Sitecore().Field("Check Coverage And Choose")</h3>
                    </header>
                    <div class="content">
                        @*<h3 class="mobile-plans-header">@Html.Sitecore().Field("Header - Choose Data Amount")</h3>*@
                        
                        @*<div class="location-section">
                            <a class="float-right" ng-click="showModal('instructions/CoverageMap')">View Coverage</a>
                        </div>*@
                        
                        <div data-ng-repeat="typedOffers in currentMobileLocationInfo().offerInformationByType" ng-include src="'dataPlanList/' + typedOffers.key"></div>
                        
                        <div class="button full" ng-show="!showPlanDetails" ng-click="showPlanDetails = true">
                            <a>@Html.Sitecore().Field("Show Plan Details")</a>
                        </div>

                        <div class="plan-details" ng-show="showPlanDetails">
                            <div class="clearfix">
                                <div class="detail-section">@Html.Raw(@Html.Sitecore().Field("Data Plans")) </div>
                                <div class="detail-section">@Html.Raw(@Html.Sitecore().Field("Unlimited Plans"))</div>
                            </div>
                            <div class="footnotes">
                                <div>@Html.Sitecore().Field("Unlimited Disclosure")</div>
                                <div>@Html.Sitecore().Field("Requires Device Disclosure")</div>
                            </div>
                        </div>
                        <div class="button full hideDetails" ng-click="showPlanDetails = false" ng-show="showPlanDetails">
                            <a>@Html.Sitecore().Field("Hide Plan Details")</a>
                        </div>
                    </div>
                    @*<footer>
                        <h3>@Html.Sitecore().Field("Header - What About Overages")</h3>
                        @Html.Sitecore().Field("Text - What About Overages")
                    </footer>*@
                </article>
                <article class="enrollment__box enrollment__configure-data" ng-show="!mobileEnrollmentSettings.disableIntegratedEnrollments && planSelection.selectedOffers['Mobile'].length && customerType != 'commercial'">
                    <div class="content additional-services">
                        <h3>@Html.Sitecore().Field("Additional Services Header")</h3>
                        <div class="additional-service">
                            <div class="additional-service-image">
                                @Html.Sitecore().Field("Energy Services Image")
                            </div>
                            <div class="additional-service-content">
                                @Html.Sitecore().Field("Energy Services Content")
                                <p><a href="" ng-click="addUtilityAddress()">@Html.Sitecore().Field("Energy Services Link Text") <i class="icon-arrow-right"></i></a></p>
                            </div>
                            @Html.Sitecore().Field("Energy Services")
                        </div>
                    </div>
                </article>
                <div class="clearfix">
                    <div class="buttons">
                        <button type="submit" class="primary" ng-click="completeStep();" ng-disabled="!planSelection.selectedOffers['Mobile'].length">@Html.Sitecore().Field("Button - Next")</button>
                        <button type="button" class="tertiary" ng-click="resetEnrollment();">@Html.Sitecore().Field("Button - Cancel Enrollment")</button>
                    </div>
                </div>
            </section>
            <aside>
                <div ng-include src="'cart-template'"></div>
            </aside>
        </div>
    </div>
</div>

<script type="text/ng-template" id="dataPlanList/Mobile">
    <div class="btn-group btn-group-options mobile-plans {{mobileEnrollmentService.selectedNetwork.value}}">
        <div class="button" ng-model="planSelection.selectedOffers[typedOffers.key]" data-btn-radio="'{{plan.id}}'" data-uncheckable ng-repeat="plan in typedOffers.value.availableOffers | filter:filterDataPlans | orderBy:'sortOrder'" ng-class="{'is-recommended':plan.recommended,'is-special-offer':plan.specialOffer}">
            <span class="recommended" ng-if="plan.recommended">@Html.Sitecore().Field("Recommended")</span>
            <span class="special-offer" ng-if="plan.specialOffer">{{ plan.specialOfferText }}</span>

            <div class="price">
                <div class="cost">{{ totalPlanPrice(plan, typedOffers.value.availableOffers) | currency }}</div>
                <div class="duration">@Html.Sitecore().Field("Per Month Text")</div>
            </div>

            <p ng-if="plan.data != 0">
                <div class="size">{{ plan.data }} <span ng-if="plan.data != 'Unlimited'">@Html.Sitecore().Field("GB Text")</span></div>
                <div class="speed">@Html.Sitecore().Field("At Speeds Up To")</div>
                @*<span ng-if="!plan.isParentOffer">@Html.Sitecore().Field("Individual Data Description")</span>
                    <span ng-if="plan.isParentOffer">@Html.Sitecore().Field("Group Data Description")</span>*@
            </p>
            <p ng-if="plan.data == 0">
                <span class="size">@Html.Raw(Html.Sitecore().Field("Talk and Text Only Text"))</span>
            </p>
            <a class="button">@Html.Sitecore().Field("Select Text")</a>
            <div class="icon-circle-check"></div>
            @*<ul class="details" ng-if="plan.data != 0">
                    <li><i class="icon-streaming-music"></i><span>@Html.Sitecore().Field("Streaming Music Text")<br /><span class="time">{{ plan.hoursMusic }} @Html.Sitecore().Field("Hours Text")</span></span></li>
                    <li><i class="icon-streaming-movies"></i><span>@Html.Sitecore().Field("Streaming Movies Text")<br /><span class="time">{{ plan.hoursMovies }} @Html.Sitecore().Field("Hours Text")</span></span></li>
                    <li><i class="icon-web-browsing"></i><span>@Html.Sitecore().Field("Web Browsing Text")<br /><span class="time">{{ plan.webPages }} @Html.Sitecore().Field("Web Pages Text")</span></span></li>
                </ul>
                <ul class="details" ng-if="plan.data == 0">
                    <li><i class="icon-talk"></i><span>@Html.Sitecore().Field("Talk Text")<br /><span class="time">@Html.Sitecore().Field("Unlimited Text")</span></span></li>
                    <li><i class="icon-text"></i><span>@Html.Sitecore().Field("Text Text")<br /><span class="time">@Html.Sitecore().Field("Unlimited Text")</span></span></li>
                    <li><i class="icon-data"></i><span>@Html.Sitecore().Field("Data Use Text")<br /><span class="time">@Html.Sitecore().Field("Price per MB Text")</span></span></li>
                </ul>*@
            @*<p>
                <span class="price">
                    <span class="original-price" ng-if="plan.specialOffer">{{ plan.specialOfferOriginalPrice | currency }}@Html.Sitecore().Field("Per Month Text")</span>
                    {{ totalPlanPrice(plan, typedOffers.value.availableOffers) | currency }}@Html.Sitecore().Field("Per Month Text")
                </span>
                <span class="limited-time-offer" ng-if="plan.specialOffer">@Html.Sitecore().Field("Limited Time Offer")</span>
            </p>*@
        </div>
    </div>
</script>

<script type="text/ng-template" id="dataPlanList/TexasElectricity">
</script>

<script type="text/ng-template" id="dataPlanList/GeorgiaGas">
</script>

<script src="//maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>

<script type="text/ng-template" id="instructions/CoverageMap">
    <div class="mobile-enrollment-modal">
        <div class="modal-header">
            <a href="" ng-click="$dismiss()">Close</a>
            <h2>@Html.Sitecore().Field("Header - SIM Number Instructions")</h2>
        </div>
        <div class="modal-body">
            @Html.Sitecore().Placeholder("CoverageMap")
        </div>
    </div>
</script>