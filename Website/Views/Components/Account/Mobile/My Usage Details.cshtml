<article class="grey-box mobile usage-details" ng-app ng-controller="AcctUsageSummaryCtrl">
    <header>
        <h2 class="header-left">@Html.Sitecore().Field("Header Text")</h2>
        <div class="filters">
            <form>
                <div class="group">
                    <div class="item usage-period">
                        <select ng-change="getUsageStats()" ng-model="currentRangeId">
                            <option ng-repeat="range in dateRanges" value="{{ range.id }}">
                                @Html.Sitecore().Field("Bill Usage") {{ range.begin | date : format : longDate }} - {{ range.end | date : format : longDate }}
                            </option>
                        </select>
                </div>
            </div>
        </form>
    </div>
</header>
    <div>
        <table>
            <thead>
                <tr>
                    <th><div>@Html.Sitecore().Field("Member Header")</div></th>
                    <th>@Html.Sitecore().Field("Data Header")</th>
                    <th>@Html.Sitecore().Field("Text Header")</th>
                    <th>@Html.Sitecore().Field("Talk Header")</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="device in deviceUsageStats">
                    <td>
                        <div class="device-full">
                            <div class="device-image"><img src="{{ getDeviceImageURL(device.id) }}" /></div>
                            <div class="device-details">
                                <strong>{{ device.name }}</strong>
                                <br />{{ device.number }}
                                <br />@Html.Sitecore().Field("Usage Details Link")
                            </div>
                        </div>
                        <div class="device-short">
                            <div class="device-image"><img src="{{ getDeviceImageURL(device.id) }}" /></div>
                        </div>
                    </td>
                    <td>
                        <div class="device-full">
                            <strong>{{ device.data.usage / 1000000000 | number }} GB</strong>
                        </div>
                        <div class="device-short">
                            <strong>{{ device.data.usage / 1000000000 | number : 1}} GB</strong>
                        </div>
                    </td>
                    <td>
                        <div class="device-full">
                            <div class="top">
                                <strong>{{ device.messages.usage | number }}</strong>
                                @Html.Sitecore().Field("Of")
                                <em>{{ device.messages.limit < 0 ? 'unlimited' : (device.messages.limit | number) }}</em>
                            </div>
                            <p>@Html.Sitecore().Field("Messages Used")</p>
                        </div>
                        <div class="device-short">
                            <strong>{{ device.messages.usage | number }}</strong>
                        </div>
                    </td>
                    <td>
                        <div class="device-full">
                            <div class="top">
                                <strong>{{ device.minutes.usage | number }}</strong>
                                @Html.Sitecore().Field("Of")
                                <em>{{ device.minutes.limit < 0 ? 'unlimited' : (device.minutes.limit | number) }}</em>
                            </div>
                            <p>@Html.Sitecore().Field("Minutes Used")</p>
                        </div>
                        <div class="device-short">
                            <strong>{{ device.minutes.usage | number }}</strong>
                        </div>
                    </td>
                </tr>
            </tbody>
            <tfoot>
                <tr ng-model="usageTotal">
                    <td><div class="add-device">@Html.Sitecore().Field("Add Device Link")</div></td>
                    <td>
                        <div class="device-full">
                            @Html.Sitecore().Field("Data Total")<br />
                            <strong>{{ deviceTotal.data.usage / 1000000000 | number }} GB</strong> 
                            @Html.Sitecore().Field("Of") 
                            <strong>{{ deviceTotal.data.limit < 0 ? 'unlimited' :  (deviceTotal.data.limit / 1000000000 | number) }} GB</strong>
                        </div>
                        <div class="device-short">
                            <strong>{{ deviceTotal.data.usage / 1000000000 | number : 1}} GB</strong> 
                        </div>
                    </td>
                    <td>
                        <div class="device-full">
                            @Html.Sitecore().Field("Message Total")<br />
                            <strong>{{ deviceTotal.messages.usage | number }}</strong>
                        </div>
                        <div class="device-short">
                            <strong>{{ deviceTotal.messages.usage | number }}</strong>
                        </div>
                    </td>
                    <td>
                        <div class="device-full">
                            @Html.Sitecore().Field("Minutes Total")<br />
                            <strong>{{ deviceTotal.minutes.usage | number }}</strong>
                        </div>
                        <div class="device-short">
                            <strong>{{ deviceTotal.minutes.usage | number }}</strong>
                        </div>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
</article>

