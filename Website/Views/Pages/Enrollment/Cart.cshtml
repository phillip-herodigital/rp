<script type="text/ng-template" id="cart-template">
    <article class="cart" ng-controller="EnrollmentCartCtrl">
        <header>
            <div class="cart-items">
                <i class="icon-cart"></i>
                <div class="item-num" ng-show="addresses">{{ sizeOf(addresses) }}</div>
            </div>
            <i class="icon-close" ng-click="toggleCart();"></i>
            <h1>@Html.Sitecore().Field("Cart Header")</h1>
        </header>
        <div class="body">
            <div class="box" ng-hide="utilityService.addresses">
                <p class="alt">@Html.Sitecore().Field("Empty Cart Text")</p>
            </div>

            @*
                We`re going to loop through all of the locations here and print out everything associated
                with them
            *@
            <div class="box" ng-repeat="(id, location) in getCartItems()">
                <div ng-repeat="(type, plans) in location">
                    <h3><span ng-show="type == 'gas'">Gas</span><span ng-show="type == 'electricity'">Electricity</span></h3>
                    <div ng-repeat="(planId, plan) in plans">
                        <div class="cart-item">
                            <div class="delete" ng-click="deleteItem()">
                                <i class="icon-delete"></i>
                            </div>
                            <div class="description">
                                <h2>{{ plan.details.name }}</h2>
                                <a href="" ng-click="changePlan()">Change Plan</a>
                            </div>
                            <div class="rate">
                                {{plan.details.rate}}&cent;
                                <span>per kWh</span>
                            </div>
                        </div>
                        <div class="cart-item" ng-show="plan.deposit">
                            <div class="description">
                                <h2>{{ plan.deposit.description }}</h2>
                            </div>
                            <div class="rate">
                                {{ plan.deposit.requiredAmount | currency }}
                            </div>
                        </div>
                    </div>
                    <hr />
                </div>
                <address>
                    <h3>@Html.Sitecore().Field("Service Address Text")</h3>
                    {{ enrollment.uiModel.enrollmentLocations[id].location.address | address }}<br />
                    <a href="" ng-click="editAddress()">@Html.Sitecore().Field("Edit Address Text")</a>
                </address>
            </div>
            <div class="box time">
                <i class="icon-clock"></i>
                @Html.Sitecore().Field("Time Remaining")
            </div>
            @Html.Sitecore().Field("Documents Description")
            <ul class="info">
                <li><i class="icon-home"></i> @Html.Sitecore().Field("Documents Service Address")</li>
                <li><i class="icon-bill"></i> @Html.Sitecore().Field("Documents Billing Account Number")</li>
                <li><i class="icon-utility-provider"></i> @Html.Sitecore().Field("Documents Utility Provider")</li>
                <li><i class="icon-ssn"></i> @Html.Sitecore().Field("Documents Social Security Number")</li>
                <li><i class="icon-drivers-license"></i> @Html.Sitecore().Field("Documents Drivers License Number")</li>
            </ul>
        </div>
    </article>
</script>