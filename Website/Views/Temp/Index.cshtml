@model StreamEnergy.DomainModels.Enrollments.UserContext
@using System.Linq.Expressions;
@using StreamEnergy.Extensions;

@*<script src="http://ajax.microsoft.com/ajax/jQuery/jquery-1.8.0.min.js"></script>
<script src="http://ajax.microsoft.com/ajax/jquery.validate/1.8/jquery.validate.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/mvc/5.1/jquery.validate.unobtrusive.js"></script>*@

<script>
    ngApp.controller('mainController', ['$scope', function ($scope) {
        $scope.provideEmail = true;
        $scope.email = '@(Model != null && Model.ContactInfo != null && Model.ContactInfo.Email != null ? Model.ContactInfo.Email.Address : null)';
    }]);
</script>

<div ng-controller="mainController">
    <form action="/mjd" method="post">
        @Html.ValidationSummary()
        <p>
            <label for="provideEmail">Provide Email?</label> <input type="checkbox" id="provideEmail" ng-model="provideEmail" />
        </p>
        <p @Html.ValidationErrorClass(model => model.ContactInfo.Email.Address) data-ng-if="provideEmail">
            <input type="text" @Html.ValidationAttributes(m => m.ContactInfo.Email.Address) data-val-if="provideEmail" ng-model="email" />
            @Html.ValidationMessageFor(model => model.ContactInfo.Email.Address)
        </p>

        <p @Html.ValidationErrorClass(model => model.ContactInfo.PrimaryPhone.Number) >
            <input type="text" @Html.ValidationAttributes(m => m.ContactInfo.PrimaryPhone.Number) ng-model="primaryPhone" />
            @Html.ValidationMessageFor(model => model.ContactInfo.PrimaryPhone.Number)
        </p>

        <button type="submit" name="btnSubmit" data-val-submit>Register</button>

        <p>myForm.$valid = {{myForm.$valid}}</p>
    </form>
</div>