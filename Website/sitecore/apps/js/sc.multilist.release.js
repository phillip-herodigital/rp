(function(a){a.widget("sc.multilist",{options:{},_create:function(){this.prepareHtml();this.addachEvent()},addachEvent:function(){var a=this,b=a.element.parent();b.find(".add-right").click(function(b){a.addRight(b);a.stopEvent(b)});b.find(".add-left").click(function(b){a.addLeft(b);a.stopEvent(b)});b.find(".move-top").click(function(b){a.moveTop(b);a.stopEvent(b)});b.find(".move-bottom").click(function(b){a.moveBottom(b);a.stopEvent(b)});b.find(".multiselect-left").dblclick(function(b){a.addRight(b);a.stopEvent(b)});b.find(".multiselect-right").dblclick(function(b){a.addLeft(b);a.stopEvent(b)});this.updateValue(b)},stopEvent:function(b){this.updateValue(a(b.currentTarget).parents("div.multiselect"));b.preventDefault();b.stopPropagation();return false},addLeft:function(c){var b=a(c.currentTarget).parents("div.multiselect");this.moveSelectedOptions(b.find(".multiselect-right"),b.find(".multiselect-left"))},moveSelectedOptions:function(b,c){var a=b.find("option[selected]");a.length>0&&a.each(function(){this.selected=false}).appendTo(c)},addRight:function(c){var b=a(c.currentTarget).parents("div.multiselect");this.moveSelectedOptions(b.find(".multiselect-left"),b.find(".multiselect-right"))},moveTop:function(d){var c=a(d.currentTarget).parents("div.multiselect").find(".multiselect-right"),b=c.find("option:selected");b.prev("option:not(:selected):first").before(b)},moveBottom:function(d){var c=a(d.currentTarget).parents("div.multiselect").find(".multiselect-right"),b=c.find("option:selected");b.next("option:not(:selected):first").after(b)},updateValue:function(a){a.find("select:hidden").empty().append(a.find("select.multiselect-right option").clone().each(function(){this.selected=true}))},prepareHtml:function(){this.element.addClass("multiselect-part multiselect-left");this.element.removeClass("field-value").parent().addClass("multiselect").prepend("<div class='title'><div class='all-title'>"+this.options.texts.all+":</div><div class='button-title'></div><div class='selected-title'>"+this.options.texts.selected+":</div></div>").prepend(a("<select multiple='multiple'></select>").addClass("field-value").css("display","none").attr({id:this.element.attr("id"),name:this.element.attr("name")})).append("<div><a class='add-right ui-button' href='#'><span class='ui-icon ui-icon-carat-1-e'/></a><a href='#' class='add-left ui-button'><span class='ui-icon ui-icon-carat-1-w'/></a></div>").append(a("<select multiple='multiple'></select>").addClass("multiselect-part multiselect-right").append(this.element.find(":selected").each(function(){this.selected=false}))).append("<div><a href='#' class='move-top ui-button'><span class='ui-icon ui-icon-carat-1-n'/></a><a href='#' class='move-bottom ui-button'><span class='ui-icon ui-icon-carat-1-s'/></a></div>")},destroy:function(){return a.Widget.prototype.destroy.call(this)}})})(jQuery);if(typeof Sys!=="undefined"){Sys.Browser.WebKit={};if(navigator.userAgent.indexOf("WebKit/")>-1){Sys.Browser.agent=Sys.Browser.WebKit;Sys.Browser.version=parseFloat(navigator.userAgent.match(/WebKit\/(\d+(\.\d+)?)/)[1]);Sys.Browser.name="WebKit"}Sys.Application.notifyScriptLoaded()}
