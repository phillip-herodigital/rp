(function(a){var b='{{if favorite}}{{if item.state != 0}}<span class="favorite-icon{{if item.favorite}} selected{{/if}}" />{{/if}}{{/if}}{{if item.state == 1 || item.state == 2 || item.state == 3}}<a {{if item.spinnerenabled != null && item.spinnerenabled && item.state != 2}}onclick="{{if item.spinnertype=="global"}}$(this).spinner({\'type\':\'global\', \'text\':\'\'});{{else}}$(\'#${item.inlinespinnercontainer}\').spinner({\'type\':\'inline\', \'text\':\'\', \'position\':\'${item.spinnerposition}\' });$(\'#${item.inlinespinnercontainer}\').trigger(\'show.spinner\');{{/if}}" {{/if}}class="menu-item{{if item.quick != null}} menu-item-name{{/if}}{{if item.state == 2}} disabled{{/if}}{{if item.state == 3}} selected{{/if}}"  {{if item.state != 2}}{{if item.name.indexOf("menuitem") == 0 && !item.popup}} href="${item.url}"{{/if}}{{/if}}name="${item.name}" {{each item.attr}} ${item.name}="${item.value}" {{/each}}{{if item.accessKey}}accessKey="${item.accessKey}"{{/if}} title="{{if item.tooltip}}${item.tooltip}{{else}}${item.title}{{/if}}{{if item.fullAccessKey}}( ${item.fullAccessKey} ){{else}}{{if item.accessKey}}( ${item.accessKey} ){{/if}}{{/if}}" >{{if item.icon}}<img src="${item.icon}" class="menu-item-icon" />{{/if}}{{if !item.quick }}<span class="menu-item-title">${item.title}</span>{{/if}}</a>{{else}}<span class="hidden"></span>{{/if}}';a.widget("sc.speakmenu",{options:{templates:{favorite:b,item:'{{if item.state != 0}}{{if typeof(item) == "string" }}{{if item == "separator" }}<li class="separator" ></li>{{else}}<li class="menu-title" >${item}</li>{{/if}}{{else}}<li {{if item.state == 2}}class = "disabled"{{/if}} {{if item.state == 3}}class = "selected"{{/if}}>'+b+"</li>{{/if}}{{/if}}",template:'<ul class="${type}" >{{if title}}<li class="menu-title">${title}</li>{{/if}}</ul>'}},_create:function(){this._initialize();this._render();this._bind()},_initialize:function(){this.element.attr("data-name",this.options.name)},_render:function(){var c=this,b=a.tmpl(this.options.templates.template,this.options.data);b.append();a(this.options.data.items).each(function(){this.state==undefined?(this.state=1):a.noop();this.state?b.append(a.tmpl(c.options.templates.item,{item:this,favorite:c.options.favorite})):a.noop()});b.find("li").size()>1?b.appendTo(this.element):this.element.detach();return this},_bind:function(){return this._click()},_click:function(d){var b=this,c=(d||b.element).find("a");a(c).each(function(){b._clickItem(a(this))});return this},getItem:function(b){var d=a(b).attr("name"),c=a(this.options.data.items).filter(function(){return d&&this.name==a(b).attr("name")});return c.size()?c[0]:null},_clickItem:function(c){var b=this;a(c).on("click",function(e){var d=b.getItem(c);if(d!=null&&d.state!=2){e.stopPropagation();setTimeout(function(){b.element.triggerHandler("beforeclick");if(d)d.name.indexOf(b.element.attr("name"))==0?b.click(d.name,"command"):d.popup?b.open(c):a.noop();b.element.trigger("menuclick",[c,d]);return c.attr("href")!="#"},50)}else{e.stopImmediatePropagation();return false}})},_popupdialogclose:function(b,d,c){a.netajax(this.element,"close:"+b.attr("name")+":"+c+":"+d)},click:function(b,c){a.netajax(this.element,c+":"+b)},open:function(b){var c=this.getItem(b);if(c){var d=this;c.popup?a(b).popupdialog({url:c.url}).on("popupdialogclose",function(f,e,c){f.stopImmediatePropagation();d._popupdialogclose(b,e,c);a(b).popupdialog("destroy");return false}).popupdialog("open"):location.replace(c.url)}},update:function(d){var a=this;a.options.data=d.data;var b=a.element,c=a.options;this.element.empty();this.destroy();b.combobox("destroy");b.menu(c)},destroy:function(){this.hoverClone?this.hoverClone.remove():a.noop();this.selectClone?this.selectClone.remove():a.noop();return a.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a){var b=a.sc.speakmenu.prototype;a.widget("sc.speakmenu",a.extend({},b,{_initialize:function(){if(this.options.type=="popup")this._initColumns();else b._initialize.apply(this,arguments)},_initColumns:function(){var b=this,c=this.options,d="empty-group";b.groups={},b.groupsСount=0;c.columnWidth=c.columnWidth||220;c.columns=c.columns||1;c.closeOnClick=true;c.templates.template='<div class="ui-combobox-trigger button important"><div class="no-top-shadow"></div><div class="trigger-inner"><span class="ui-icon-triangle-1-s ui-icon ui-combobox-icon"></span><a href="#" class="ui-combobox-menu-title">${title}</a></div></div>';a(c.data.items).each(function(){this.quick=null;d=this.group=this.group||d;b.groups[d]=b.groups[d]||[];b.groups[d].push(this)});a.each(this.groups,function(){a.each(this,function(){if(this.state!=0){++b.groupsСount;return false}})});b.groupsСount=b.groupsСount>0?b.groupsСount:1},_render:function(){var c=this;if(this.options.type=="popup"){this._rendePopup();this.element.addClass("popup-menu");this.element.on("show.combobox",function(){a(this).find(".ui-combobox-trigger").addClass("pressed");c.element.addClass("ui-state-open")}).on("hide.combobox",function(){a(this).find(".ui-combobox-trigger").removeClass("pressed");c.element.removeClass("ui-state-open")})}else b._render.apply(this,arguments)},_rendePopup:function(){var c=this,d=this.options,b=popup=a('<div class="popup-menu-body"></div>').css({width:this.options.data.columnWidth*this.options.data.columns});popup.append('<div class="popup-title"><a href="#" class="close"></a><div >'+c.options.data.title+"</div></div>").append(this._renderColumns()).find("ul").addClass("popup");b=popup.clone(true);this.element.append(popup).addClass("ui-popupmenu").removeClass("menu");this.element.combobox({comboboxTemplate:a.tmpl(d.templates.template,{title:d.data.title||" "})[0],height:"auto",width:this.options.columnWidth*this.groupsСount+8,closeOnClick:c.options.closeOnClick,onClose:function(b){return function(){a(".ui-combobox-trigger",b).removeClass("ui-state-hover")}}(this.element),show:function(a){a.stop().slideDown(100)}});this.element.combobox("getPopup").html(b);this.popup=b;this.popup.find(".close").on("click",function(){c.element.combobox("hidePopup")});a(".popup-menu-body").closest(".ui-widget-content").addClass("round-corner")},_clickItem:function(c){if(this.options.type=="popup"){var e=this,d=e.getItem(c);if(d!=null&&d.state!=2)a(c).on("click",function(){e.element.combobox("hidePopup")})}return b._clickItem.apply(this,arguments)},_renderColumns:function(){var f=this.options,c=a('<div class="columns"></div>'),d=this,b=[],e=Math.floor((d.groupsСount+d.options.data.items?d.options.data.items.length:0)/d.groupsСount);a.each(this.groups,function(g,f){if(b.length+f.length>=e&&b.length){d._renderColumn(c,b,{});b=[]}g!="empty-group"&&b.push(g);a(f).each(function(){b.push(this)})});this._renderColumn(c,b,{});c.find(".column:first").addClass("first");c.find(".column:last").addClass("last");return c.append(a('<div style="clear:both;"></div>'))},_renderColumn:function(c,f,d){var e=this.options,b=a('<div class="column vertical"><ul ></ul></div>');a.each(f,function(f,c){c.state==undefined?(c.state=1):a.noop();b.find("ul").append(a.tmpl(e.templates.item,a.extend({item:c},d)))});b.find("li").size()>1?b.appendTo(c):c.detach()}}))})(jQuery);(function(a){var b=a.sc.speakmenu.prototype;a.widget("sc.speakmenu",a.extend({},b,{_bind:function(){var a=this;if(this.options.type=="popup"){this._favorite();return this._click(this.popup)}return b._bind.apply(this,arguments)},_favorite:function(){var b=this;b.popup.find(".favorite-icon").click(function(){var c=a(this).next(".menu-item:first");(b.getItem(c)||{}).favorite=!a(this).hasClass("selected");a(this).hasClass("selected")?a(this).removeClass("selected"):a(this).addClass("selected");a.netajax(b.element,"favorite:"+c.attr("name"),false);b._renderFavorites(b.favorite)})},_renderFavorites:function(d){d.empty();var g=this.options,c=this,b=a('<div class="favorite-items"></div>').appendTo(d),f=[];a(this.options.data.items).each(function(a){this.key=a}).filter(function(){this.quick=!!this.icon;return this.favorite&&this.icon}).each(function(){c._renderFavorite(this,b)});var e=a(this.options.data.items).filter(function(){this.quick=!!this.icon;return this.favorite&&!this.icon});e.length?(b=a("<div class='favorite-item-names'></div>").appendTo(b)):a.noop();e.each(function(){c._renderFavorite(this,b)});a(".menu-item",b.parent()).each(function(){a(this).tooltip({trigger:a(this).closest("a"),position:["top","center"],text:a(this).attr("title"),offset:[0,0],delay:0,container:c.element.closest("form")})});b.find(".menu-item-name:first").addClass("first");b.find(".menu-item-name:last").addClass("last")},_renderFavorite:function(d,e,c){var b;if(c||c===0){b=a.tmpl(this.options.templates.favorite,{item:d});a(e).find('[data-favkey = "'+c+'"]').replaceWith(b)}else b=a.tmpl(this.options.templates.favorite,{item:d}).appendTo(e);this._clickItem(b);b.attr("data-favkey",d.key).filter(function(){return a(".menu-item-title",this).css("width")!=a(".menu-item-title",this).css("max-width")}).find(".ellipsis").css("display","none")},_render:function(){b._render.apply(this,arguments);this.options.type=="popup"&&this._renderFavorites(this.favorite)},_rendePopup:function(){b._rendePopup.apply(this,arguments);this.favorite=a('<div class="favorite"></div>').appendTo(this.element)},_renderColumn:function(c,d,a){a.favorite=this.options.favorite;b._renderColumn.apply(this,arguments)}}))})(jQuery);(function(a){var b=a.sc.speakmenu.prototype;a.widget("sc.speakmenu",a.extend({},b,{_bind:function(){var c=this;if(this.options.type=="popup")this.element.off("over.menu selectgridrow.menu").on("over.menu selectgridrow.menu",function(g,d,b,f,e){if(g.type!="selectgridrow"){e&&c._setStates(e,"hover");d?d.is(c.hoverClone.parent())?c.hoverClone.css(b?b:{}):d.append(c.hoverClone.css(b?b:{})):a.noop();f?c.hoverClone.off("mouseover.menu").on("mouseover.menu",function(){f()}):a.noop()}else{e&&c._setStates(e,"select");if(d&&c.selectClone)d.append(c.selectClone.css(b?b:{}));else c.selectClone=c.selectClone?c.selectClone.detach():false}}).off("leave.menu").on("leave.menu",function(d,b){c.hoverClone=c.hoverClone?c.hoverClone.detach():false;c.hoverClone?c.hoverClone.off("mouseleave.menu").on("mouseleave.menu",function(){b?b():a.noop()}):a.noop();b?b():a.noop()}).off("beforeclick.menu").on("beforeclick.menu",function(){c.element.trigger("leave")}).off("gridcomplete.menu favoritesclone.menu iconlistcreate.menu").on("gridcomplete.menu favoritesclone.menu iconlistcreate.menu",function(){c.hoverClone=c.hoverClone?c.hoverClone:a('<div class="favorite hover-clone"></div>');c.selectClone=c.selectClone?c.selectClone:a('<div class="favorite select-clone"></div>');c._renderFavorites(c.hoverClone);c._renderFavorites(c.selectClone)}).off("allfavorites.menu").on("allfavorites.menu",function(){c._allFavorites()});return b._bind.apply(this,arguments)},_allFavorites:function(){a.each(this.options.data.items,function(){this.favorite=true});this._renderFavorites(this.favorite);this.element.trigger("favoritesclone")},_setStates:function(d,c){var b=this;this.hoverSates?a.noop():(this.hoverSates=[]);this.selectSates?a.noop():(this.selectSates=[]);c=="hover"?this.hoverSates.length>0?a.noop():a.each(this.options.data.items,function(){b.hoverSates.push(this.state)}):c=="select"?this.selectSates.length>0?a.noop():a.each(this.options.data.items,function(){b.selectSates.push(this.state)}):a.noop();var e=c=="hover"?this.hoverSates:c=="select"?this.selectSates:[],f=c=="hover"?b.hoverClone:b.selectClone;e.toString()!=d.toString()&&a.each(e,function(a,g){if(g!=d[a]){e[a]=d[a];b.options.data.items[a].state=d[a];b._renderFavorite(b.options.data.items[a],f,a);var c=f.find('[data-favkey = "'+a+'"]');c.tooltip("destroy").tooltip({trigger:c,position:["top","left"],text:c.attr("title"),offset:[0,0],delay:0,container:b.element.closest("form")})}})}}))})(jQuery);(function(a){var b=a.sc.speakmenu.prototype;a.widget("sc.speakmenu",a.extend({},b,{_initialize:function(){if(this.options.type=="switcher")this._initColumns();else b._initialize.apply(this,arguments)},_render:function(){this.options.type=="switcher"?this._renderSwitcher():b._render.apply(this,arguments)},_renderSwitcher:function(){var i=this,k=this.options,e=k.data.items;this.element.addClass("content-switcher");var b=this.shell=a('<div class="shell"></div>').addClass("popup-menu-body").css({padding:"0 4px 4px 4px",overflow:"hidden"}),j=this.columns=this._renderColumns().css({display:"inline-block",padding:"4px 0"}),d=this.columnsWrapper=a('<div class="border"></div>').append(j),h=this.button=a('<div class="button"><a href="#">Context Switcher</a></div>'),g=this.btnLink=a("a",h),f=this.element.parent();this.element.append(b.append(d).append("<div></div>").append(h)).css({top:0,right:a(window).width()-f.offset().left-f.width()-4});this.element.css({top:-d.outerHeight()});for(var c=0;c<e.length;c++)if(e[c].state==3){g.text(e[c].title);break}b.find(".border").css("box-shadow","none");b.find(".button").css("box-shadow","none");g.click(function(){var c=!i.element[0].offsetTop?-d.outerHeight():0;a(".popup-menu").trigger("over.combobox");i.element.animate({top:c},200,function(){if(!c){b.find(".border").css("box-shadow","0 2px 4px rgba(0, 0, 0, 0.5)");b.find(".button").css("box-shadow","0 2px 4px rgba(0, 0, 0, 0.5)")}else{b.find(".border").css("box-shadow","none");b.find(".button").css("box-shadow","none")}});return false})},_click:function(){var c=this;if(this.options.type=="switcher")a("a",this.columns).each(function(){c._clickItem(a(this))});else b._click.apply(this,arguments);return this},_clickItem:function(d){var c=this;if(this.options.type=="switcher")a(d).bind("click",function(){c.btnLink.text(a(this).text());c.element.triggerHandler("beforeclick");var b=c.getItem(d),e=!c.element[0].offsetTop?-c.columnsWrapper.outerHeight():0;c.element.animate({top:e},200,function(){if(b)b.name.indexOf(c.element.attr("name"))==0?c.click(b.name,"command"):b.popup?c.open(d):a.noop();c.element.trigger("menuclick",[d,b])});c.element.trigger("menuclick",[d,b]);return d.attr("href")!="#"});else b._clickItem.apply(this,arguments)}}))})(jQuery);if(typeof Sys!=="undefined"){Sys.Browser.WebKit={};if(navigator.userAgent.indexOf("WebKit/")>-1){Sys.Browser.agent=Sys.Browser.WebKit;Sys.Browser.version=parseFloat(navigator.userAgent.match(/WebKit\/(\d+(\.\d+)?)/)[1]);Sys.Browser.name="WebKit"}Sys.Application.notifyScriptLoaded()}
