/**!
 *
 * sitecore SPEAK framework
 *
 * Built: Thu Oct 30 2014 16:20:20 GMT+0000 (GMT Standard Time)
 * PackageVersion: 1.1.1
 *
 */

!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.sc=a():"undefined"!=typeof global?global.sc=a():"undefined"!=typeof self&&(self.sc=a())}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){},{}],2:[function(a,b){var c=function(a){return typeof{}==typeof a},d=function(a,b){for(var c in b){if(a[c])throw"key "+c+" already exists in the module";a[c]=b[c]}},e=function(a,b){var e,f;if(e=this.fn=this.fn||{},!a&&!b)throw"Please, pass at least a module name";return e[a]&&!b?e[a]:e[a]||b?(f=c(b)?b:b.apply({},[this]),!e[a]&&b?e[a]=f:d(e[a],f),e[a]):null};b.exports={attach:function(a){a.module||(a.module=e.bind(a))}}},{}],3:[function(a,b){var c=a("./model/pipelines");c.Pipeline=a("./model/pipeline");var d=a("./pipelines/Invoke/index"),e=a("./pipelines/ServerInvoke/index");c.add(d),c.add(e),b.exports=c},{"./model/pipeline":4,"./model/pipelines":5,"./pipelines/Invoke/index":10,"./pipelines/ServerInvoke/index":12}],4:[function(a,b){var c=a("../utils/index"),d=function(a){var b={processors:[],name:a,add:function(a){if(!(a&&a.priority&&a.execute&&c.isNumber(a.priority)&&c.isFunction(a.execute)))throw"not valid step";this.processors.push(a)},length:function(){return this.processors.length},remove:function(a){this.processors=c.reject(this.processors,function(b){return b.priority===a.priority})},execute:function(a){var b=c.sortBy(this.processors,function(a){return a.priority});b.forEach(function(b){return a.aborted?!1:void b.execute(a)})}};return b};b.exports=d},{"../utils/index":14}],5:[function(a,b){var c=a("../utils/index"),d=[],e={get:function(a){var b;return d.forEach(function(c){c.name===a&&(b=c)}),b},add:function(a){if(!a||!a.name||!c.isObject(a))throw new Error("invalid pipeline");d.push(a),this[a.name]=a},remove:function(a){d=c.reject(d,function(b){return b.name===a})},length:function(){return d.length}};b.exports=e},{"../utils/index":14}],6:[function(a,b){var c=a("../../utils/index"),d={priority:1e3,execute:function(a){"javascript"===a.handler&&(a.target.indexOf(";")>0?a.target.split(";").forEach(function(b){c.executeContext(b,a)}):c.executeContext(a.target,a))}};b.exports=d},{"../../utils/index":14}],7:[function(a,b){var c=(a("../../utils/index"),a("../../utils/command")),d={priority:2e3,execute:function(a){"command"===a.handler&&c.executeCommand(a.target)}};b.exports=d},{"../../utils/command":13,"../../utils/index":14}],8:[function(a,b){var c=(a("../../utils/index"),{priority:3e3,execute:function(a){if("serverclick"===a.handler){var b={url:a.target,type:"POST",dataType:"json"},c=function(b){sitecore.module("pipelines").get("ServerInvoke").execute({data:b,model:a.model})},d=new XMLHttpRequest;d.open(b.type,b.url,!0),"post"===b.type.toLowerCase()&&d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),d.send(null),d.onreadystatechange=function(){4===d.readyState&&(200===d.status?c(JSON.parse(d.responseText)):console.log("Error: "+d.responseText))}}}});b.exports=c},{"../../utils/index":14}],9:[function(a,b){var c=(a("../../utils/index"),{priority:4e3,execute:function(a){var b=a.app,c=a.target,d={};if("trigger"===a.handler){if(!b)throw new Error("An application is a required when triggering events");var e=c.indexOf("(");if(e>=0){if(-1===c.indexOf(")",c.length-1))throw"Missing ')'";var f=c.substr(e+1,c.length-e-2);d=JSON.parse(f),c=c.substr(0,e)}d.sender=a.control,b.trigger(c,d)}}});b.exports=c},{"../../utils/index":14}],10:[function(a,b){var c=a("../../model/pipeline"),d=new c("Invoke");d.add(a("./1000-HandleJavascript")),d.add(a("./2000-HandleCommand")),d.add(a("./3000-ServerClick")),d.add(a("./4000-TriggerEvent")),b.exports=d},{"../../model/pipeline":4,"./1000-HandleJavascript":6,"./2000-HandleCommand":7,"./3000-ServerClick":8,"./4000-TriggerEvent":9}],11:[function(a,b){var c={priority:1e3,execute:function(a){var b=a.data.ViewModel;null!=b&&ko.mapping.fromJS(b,{},a.model)}};b.exports=c},{}],12:[function(a,b){var c=a("../../model/pipeline"),d=new c("ServerInvoke");d.add(a("./1000-UpdateModel")),b.exports=d},{"../../model/pipeline":4,"./1000-UpdateModel":11}],13:[function(a,b){var c=a("./index"),d=function(a){if(!c.isString(a))throw"provied a correct Path to resolve";for(var b=a.split("."),d=root||window,e=0;e<b.length;e++)if(d=d[b[e]],null==d)throw"Reference '"+a+"' not found";return d},e=function(a){return d(a)},f=function(a,b){if(!a||!c.isString(a))throw new Error("cannot execute command without commandName");var d=e(a);d.canExecute(b)&&d.execute(b)},g={resolve:d,getCommand:e,executeCommand:f};b.exports=g},{"./index":14}],14:[function(a,b){var c=Object.prototype.toString,d={lookupIterator:function(a){return d.isFunction(a)?a:function(b){return b[a]}},isFunction:function(a){return"function"==typeof a},isObject:function(a){return"[object Object]"===c.call(a)},isNumber:function(a){return"[object Number]"===c.call(a)},isString:function(a){return"[object String]"===ttoString.call(a)},pluck:function(a,b){return a.map(function(a){return a[b]})},reject:function(a,b,c){return a.filter(function(a,d,e){return!b.call(c,a,d,e)})},sortBy:function(a,b,c){var e=d.lookupIterator(b);return d.pluck(a.map(function(a,b,d){return{value:a,index:b,criteria:e.call(c,a,b,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")},executeContext:function(a,b){var c=a.split("."),d=c[0];if("this"===d)new Function(a).call(b.control.model);else if(b.app&&"app"===d){var e=a.replace("app","this");new Function(e).call(b.app)}else new Function(a)()}};b.exports=d},{}],15:[function(a,b,c){var d=a("./ises/type"),e={a:{},an:{},not:{a:{},an:{}}},f={arguments:["arguments",d("arguments")],array:["array",d("array")],"boolean":["boolean",d("boolean")],date:["date",d("date")],"function":["function","func","fn",d("function")],"null":["null",d("null")],number:["number","integer","int",d("number")],object:["object",d("object")],regexp:["regexp",d("regexp")],string:["string",d("string")],undefined:["undefined",d("undefined")],empty:["empty",a("./ises/empty")],nullorundefined:["nullOrUndefined","nullorundefined",a("./ises/nullorundefined")],guid:["guid",a("./ises/guid")]};Object.keys(f).forEach(function(a){var b=f[a].slice(0,f[a].length-1),c=f[a][f[a].length-1];b.forEach(function(a){e[a]=e.a[a]=e.an[a]=c,e.not[a]=e.not.a[a]=e.not.an[a]=function(){return c.apply(this,arguments)?!1:!0}})}),c=b.exports=e,c.type=d},{"./ises/empty":16,"./ises/guid":17,"./ises/nullorundefined":18,"./ises/type":19}],16:[function(a,b){var c=a("../type");b.exports=function(a){var b=!1;return"null"===c(a)||"undefined"===c(a)?b=!0:"object"===c(a)?b=0===Object.keys(a).length:"boolean"===c(a)?b=a===!1:"number"===c(a)?b=0===a||-1===a:("array"===c(a)||"string"===c(a))&&(b=0===a.length),b}},{"../type":21}],17:[function(a,b){var c=a("sc-guid");b.exports=function(a){return c.isValid(a)}},{"sc-guid":20}],18:[function(a,b){b.exports=function(a){return null===a||void 0===a||void 0===a}},{}],19:[function(a,b){var c=a("../type");b.exports=function(a){return function(b){return c(b)===a}}},{"../type":21}],20:[function(a,b,c){var d="{?[0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-4[0-9A-Fa-f]{3}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12}}?";c.generate=function(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"===b?c:7&c|8).toString(16)});return b},c.match=function(a){var b=new RegExp(d,"g"),c=("string"==typeof a?a:"").match(b);return Array.isArray(c)?c:[]},c.isValid=function(a){var b=new RegExp(d);return b.test(a)}},{}],21:[function(a,b){var c=Object.prototype.toString;b.exports=function(a){switch(c.call(a)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===a?"null":void 0===a?"undefined":a===Object(a)?"object":typeof a}},{}],22:[function(a,b){a("sc-is");b.exports={is:a("./utils/is"),string:a("./utils/string"),object:a("./utils/object"),array:a("./utils/array"),url:a("./utils/url"),"function":a("./utils/function"),async:a("./utils/async"),date:a("./utils/date")}},{"./utils/array":23,"./utils/async":24,"./utils/date":25,"./utils/function":26,"./utils/is":27,"./utils/object":29,"./utils/string":30,"./utils/url":31,"sc-is":15}],23:[function(a,b){var c=a("sc-is"),d=Array.prototype,e=function(a){for(var b=[],c=a.length>>>0;c--;)b[c]=a[c];return b},f=function(a,b){for(var c=a.length;c--;)if(a[c]===b)return!0;return!1},g=function(a,b){return b=b||[],c.an.array(a)?(a.forEach(function(a){if(c.an.array(a)){var e=g(a);c.an.array(e)?b=d.concat(b,e):b.push(a)}else b.push(a)}),b):a},h=function(a,b,c){var d,c=c?c:this;return a.forEach(function(e,f){b.call(c,e,f,a)&&(d=e)}),d};b.exports={toArray:e,contains:f,flatten:g,find:h}},{"sc-is":15}],24:[function(a,b){var c=a("./native"),d=c.slice,e=function(a){return function(){var b=d.call(arguments);return a.apply(null,[g].concat(b))}},f=function(a){var b=!1;return function(){if(b)throw new Error("Callback was already called.");b=!0,a.apply(window,arguments)}},g=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0;a.forEach(function(e){b(e,f(function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length&&c(null))}))})},h=function(a,b,c,d){var e=[];b=b.map(function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};b.exports={each:g,map:e(h)}},{"./native":28}],25:[function(a,b){var c=a("./is"),d=function(a){return 10>a?"0"+a.toString():a.toString()},e={mmss:{expression:"(\\W|^)mm(\\W+s{1,2}\\W|\\W+s{1,2}$)",value:function(a){return d(a.getUTCMinutes())}},mss:{expression:"(\\W|^)m(\\W+s{1,2}\\W|\\W+s{1,2}$)",value:function(a){return a.getUTCMinutes().toString()}},hmm:{expression:"(\\Wh{1,2}\\W+|^h{1,2}\\W+)mm(\\W|$)",value:function(a){return d(a.getUTCMinutes())}},hm:{expression:"(\\Wh{1,2}\\W+|^h{1,2}\\W+)m(\\W|$)",value:function(a){return a.getUTCMinutes().toString()}},ms:{expression:"(\\Wss\\W|^ss\\W)00(\\W|$)",value:function(a){return d(a.getUTCMilliseconds())}},ampm:{expression:"(\\W|^)AM/PM(\\W|$)",value:function(a){return a.getUTCHours()>=12?"PM":"AM"}},ap:{expression:"(\\W|^)A/P(\\W|$)",value:function(a){return a.getUTCHours()>=12?"P":"A"}},yyyy:{expression:"(\\W|^)yyyy(\\W|$)",value:function(a){return a.getUTCFullYear().toString()}},yy:{expression:"(\\W|^)yy(\\W|$)",value:function(a){return d(a.getUTCFullYear()%100)}},mm:{expression:"(\\W|^)mm(\\W|$)",value:function(a){return d(a.getUTCMonth()+1)}},m:{expression:"(\\W|^)m(\\W|$)",value:function(a){return(a.getUTCMonth()+1).toString()}},dd:{expression:"(\\W|^)dd(\\W|$)",value:function(a){return d(a.getUTCDate())}},d:{expression:"(\\W|^)d(\\W|$)",value:function(a){return a.getUTCDate().toString()}},hh:{expression:"(\\W|^)hh(\\W|$)",value:function(a){return d(a.getUTCHours())}},h:{expression:"(\\W|^)h(\\W|$)",value:function(a){return a.getUTCHours()>12?(a.getUTCHours()-12).toString():(0==a.getUTCHours()?12:a.getUTCHours()).toString()}},ss:{expression:"(\\W|^)ss(\\W|$)",value:function(a){return d(a.getUTCSeconds())}},s:{expression:"(\\W|^)s(\\W|$)",value:function(a){return a.getUTCSeconds().toString()}}},f={toISO:function(a){if(!c.a.date(a))return!1;var b=d(a.getFullYear()),e=d(a.getMonth()+1),f=d(a.getDate());return b+e+f},parseISO:function(a){var b,d,e,f,g,h;return c.a.string(a)?(b=parseInt(a.substr(0,4),10),d=parseInt(a.substr(4,2),10)-1,e=parseInt(a.substr(6,2),10),8!==a.indexOf("T")?new Date(Date.UTC(b,d,e,0,0,0,0)):(f=parseInt(a.substr(9,2),10),g=parseInt(a.substr(11,2),10),h=parseInt(a.substr(13,2),10),new Date(Date.UTC(b,d,e,f,g,h)))):null},isISO:function(a){var b;return c.a.date(a)&&(a=a.toString()),c.a.string(a)?(":"===a.charAt(15)&&(a=a.substr(0,15)),8!=a.length&&15!=a.length?!1:(b=this.parseISO(a),c.a.date(b)?isNaN(b.getYear())?!1:!0:!1)):!1},toStringWithFormat:function(a,b){if(this.isISO(a))try{var c=this.parseISO(a);for(var d in e){var f=e[d]?e[d].expression:"",g="$1"+e[d].value(c)+"$2";if(""!=f){var h=new RegExp(f,"g");b=b.replace(h,g)}}return b}catch(i){return!1}return!1}};b.exports=f},{"./is":27}],26:[function(a,b){var c=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}};b.exports={once:c}},{}],27:[function(a,b){var c=a("sc-is"),d=function(a){return a.charAt(0)===a.charAt(0).toUpperCase()};c.capitalize=d,b.exports=c},{"sc-is":15}],28:[function(a,b){var c=Array.prototype;b.exports={arrayProto:c,forEach:c.forEach,slice:c.slice}},{}],29:[function(a,b){var c=a("./native"),d=c.forEach,e=c.slice,f=function(a){return d.call(e.call(arguments,1),function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},g=function(a,b,c){var d=function(){return a.apply(this,arguments)};f(d,a);var e=function(){this.constructor=d};if(e.prototype=a.prototype,d.prototype=new e,d.prototype.initialize=b||a.prototype.initialize||function(){},c)for(var g in c)c.hasOwnProperty(g)&&(d.prototype[g]=c[g]);return d.__super__=a.prototype,d},h=function(a){return e.call(arguments,1).forEach(function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},i=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.prototype[c]=b[c]);return a},j=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b};b.exports={extend:f,inherits:g,defaults:h,extendProto:i,flatten:j}},{"./native":28}],30:[function(a,b){var c=0,d=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},e=function(a){return a.charAt(0).toLowerCase()+a.slice(1)},f=function(a){var b=++c+"";return a?a+b:b};b.exports={capitalize:d,lowerFirstLetter:e,uniqueId:f}},{}],31:[function(a,b){var c=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.href);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))};b.exports={parameterByName:c}},{}],32:[function(a,b){var c=0,d=function(){var a=++c+"";return prefix?prefix+a:a},e=/\s+/,f=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},g=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(e.test(c)){for(var g=c.split(e),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(d));return!1}return!0},h={on:function(a,b,c){if(!g(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){if(!g(this,"once",a,[b,c])||!b)return this;var d=this,e=_.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var d,e,f,h,i,j,k,l;if(!this._events||!g(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:Object.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!g(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.change;return c&&f(c,b),d&&f(d,arguments),this},stopListening:function(a,b,c){var d=this._listeningTo;if(!d)return this;var e=!b&&!c;c||"object"!=typeof b||(c=this),a&&((d={})[a._listenId]=a);for(var f in d)a=d[f],a.off(b,c,this),(e||0===Object.keys(a._events))&&delete this._listeningTo[f];return this}},i={listenTo:"on",listenToOnce:"once"};for(var j in i){var k=i[j],l=j;h[l]=function(a,b,c){var e=this._listeningTo||(this._listeningTo={}),f=a._listenId||(a._listenId=d("l"));return e[f]=a,c||"object"!=typeof b||(c=this),a[k](b,c,this),this}}b.exports=h},{}],33:[function(a,b){var c="data-sc-component",d="data-sc-id",e="data-sc-app",f="data-sc-require",g="script[type='text/x-sitecore-pagecode']",h="data-sc-template",i="data-sc-properties",j="data-sc-presenter",k="data-sc-pluginId",l="data-sc-hasnested",m="data-sc-id",n="script[type='text/x-sitecore-pluginscript']";b.exports={TYPE:c,ID:d,SCRIPT:f,ROOTSTATICURL:"",TEMPLATE:h,PROPERTIES:i,PRESENTER:j,APP_KEY:e,NESTED:l,ATTR_COMPONENT:"["+m+"]",ATTR_TYPE:"["+c+"]",ATTR_ID:"["+d+"]",ATTR_APP:"["+e+"]",ATTR_SCRIPT:"["+f+"]",ATTR_PAGECODE:g,ATTR_PLUGIN:n,PLUGIN_ID:k,deferred:!1,useBundle:!1,cloak:"data-sc-cloak",defaultPresenter:"scComponentPresenter",lifeCycle:["initialize","initialized","beforeRender","render","afterRender"]}},{}],34:[function(a,b){b.exports=function(a){var b={handleEvent:function(b,c){if(!b)throw new Error("You must pass an invocation");var d=b.indexOf(":");if(0>=d)throw new Error("Invocation is malformed (missing 'handler:')");var e={control:c,app:c.app,handler:b.substr(0,d),target:b.substr(d+1)};a.module("pipelines").get("Invoke").execute(e)}};return b}},{}],35:[function(a,b){var c=a("../model/property"),d=c.prototype,e=a("sc-utils"),f=function(a){var b=function(){c.apply(this,arguments)};e.is.a.function(a)&&(b=function(){c.apply(this,arguments),a.apply(this,arguments)});for(var f in d)b.prototype[f]=d[f];for(var g in a)b.prototype[g]=a[g];return b};b.exports={make:f}},{"../model/property":48,"sc-utils":22}],36:[function(a,b){var c=a("../utils/inheritance"),d=a("../utils/app"),e=a("speakevent"),f=a("sc-utils");b.exports=function(a,b,g){return{createApplication:function(h,i){var j,k=f.string.uniqueId(),l=b.setupInjectMethod(i),m=a.find(h.key);return m&&(j=c.wrap(g,m),h=new j(h)),f.object.extend(h,d),f.object.extend(h,e),h.inject=function(){l.apply(this,arguments)},h.el&&(h.el.__domID=k,h.__domID=k),h}}}},{"../utils/app":57,"../utils/inheritance":61,"sc-utils":22,speakevent:32}],37:[function(a,b){var c=a("../utils/inheritance"),d=function(a){var b=function(a,b){var c={}.constructor!==b.constructor?b.constructor:a.prototype.constructor,d=a.prototype,e=function(a){return function(){a.apply(this,arguments)}}(c);b.constructor!=={}.constructor&&b.prototype&&(d=b.prototype);for(var f in d)e.prototype[f]=d.hasOwnProperty(f)&&b[f]?b[f]:d[f];return e};return{make:function(d,e,f){var g,h=d||a.prototype;return h.make?h.make(e,f):(g=b(a,h),c.wrap(g,e))}}};b.exports=d},{"../utils/inheritance":61}],38:[function(a,b){var c,d,e,f,g=a("../model/store"),h={create:function(){return presenter=new g("presenters"),c=new g("plugins"),d=new g("components"),e=new g("pagecodes"),f=new g("applications"),propertyType=new g("properties"),{presenter:presenter,plugin:c,component:d,pageCode:e,app:f,propertyType:propertyType,build:function(a){f.flush(),d.flush(),e.flush(),c.flush(),f.build(a.applications),d.build(a.components),e.build(a.pageCodes),c.build(a.plugins)}}}};b.exports=h},{"../model/store":49}],39:[function(a,b,c){var d=a("sc-utils"),e=a("./utils"),f=a("modulejs"),g=a("./conf"),h=a("./utils/DOM"),i=a("speakevent"),j={};f.attach(j);var k="undefined"!=typeof window,l=k?window:b.exports,m=l.__SPEAK_LOADED,n=l.__speak_config||{},o=l.Handlebars,p=n.deferred,q=n.lifeCycle||g.lifeCycle,r=function(){},s=function(){},t=function(){},u=function(){},v=function(){},w=k&&n.conf?n.conf:[],x={loader:function(a,b){var c=d.array.flatten(a);c.length?requirejs(c,function(){b.apply(this,arguments)}):b()},template:o};k&&!l.console&&(l.log=function(){}),n=d.object.defaults(n,x);var y=n.template,z=a("./manager/template")(y),A=a("./loader/loader")(n),B=a("./factory/store").create(),C=a("./parser/index"),D=a("./manager/plugin")(B.plugin),E=a("./model/basePresenter")(D,B.propertyType),F=a("./model/baseModel")(B.propertyType),G=a("./model/pageCode")(B.propertyType),H=a("./factory/component")(E),I=a("./manager/component")(q,B.component,B.presenter,w,H,j),J=a("./utils/inject")(A,C,B),K=a("./factory/application")(B.pageCode,J,G),L=a("./manager/app")(B.app,I.componentPipeline,D.initializeApplication,K);j.init=function(a){if(!m){m=!0,s(j);var b=C.parse();t(j),B.build(b),u(j),A.load(B,function(){v(j),L.start(function(b,c){1===b.length&&(b=b[0]),j.app=b,j.applications=c,j.trigger("apps:loaded",b),a&&a(b)})})}},j.template=z,j.isDebug=function(){return n.debug||d.url.parameterByName("sc_debug")},j.tmpl=z.tmp,j.uniqueId=d.string.uniqueId,j.async=d.async,j.presenter=B.presenter.create.bind(B.presenter),j.presenter({name:g.defaultPresenter}),j.plugin=B.plugin.create.bind(B.plugin),j.component=B.component.create.bind(B.component),j.pageCode=function(){B.pageCode.isPageCode=!0,B.pageCode.create.apply(B.pageCode,arguments)},j.propertyType=B.propertyType.create.bind(B.propertyType),j.exposeComponent=I.exposeComponent,j.extend=d.object.extend,j.applyPlugins=D.initializeComponent,j.utils=d.object.extend(d,e),j.utils.Events=i,j.Pipelines=j.module("pipelines",a("sc-pipeline")),j.Events=a("./events/index")(j),j.bindable=function(a){return new F(a)},d.object.extend(j,i),k&&(h.addCloak(),l.document.onreadystatechange=function(){p||m||j.init(r)}),j.ready=function(a){r=a},j.parser={before:function(a){s=a},after:function(a){t=a}},j.loaded={before:function(a){u=a},after:function(a){onAfterParseLoad=a}},c=b.exports=j,k&&(window.Sitecore=window.Sitecore||{},window.Sitecore.Speak=c)},{"./conf":33,"./events/index":34,"./factory/application":36,"./factory/component":37,"./factory/store":38,"./loader/loader":40,"./manager/app":41,"./manager/component":42,"./manager/plugin":43,"./manager/template":44,"./model/baseModel":45,"./model/basePresenter":46,"./model/pageCode":47,"./parser/index":52,"./utils":60,"./utils/DOM":55,"./utils/inject":62,modulejs:2,"sc-pipeline":3,"sc-utils":22,speakevent:32}],40:[function(a,b){var c=a("../utils/index"),d=function(b){var d=b.useBundle,e=b.loader?b.loader:void 0;e||(e=a("loaderJS").use);var f=function(a,b,f){var g=a.component[b](),h=a.pageCode[b](),i=a.presenter[b](),j=a.plugin[b](),k=[];return k=k.concat(g).concat(h).concat(i).concat(j),0===k.length?f():"deps"!==b&&d?e(c.buildModRequest(k),function(){requirejs(k,f)}):void e(k,f)};return{load:function(a,b){f(a,"scripts",function(){f(a,"deps",b)})}}};b.exports=d},{"../utils/index":60,loaderJS:1}],41:[function(a,b){var c=a("../utils/index"),d=c.sortByDepth,e=["initialize","initialized","render"],f=a("sc-utils"),g=function(a,b,g,h){var i=function(a){return function(b){var c=b[a];c&&c.call(b)}},j=function(a){a.trigger("app:loaded",a)},k=function(a){for(var b=e.slice(0);b.length;){var c=b.shift();a.forEach(i(c))}a.forEach(j)};return{start:function l(e,i){i||(i=e,e=void 0),e&&b(this,e);var j=d(f.object.flatten(a.stores)),m=[];j.length>0&&(j.forEach(function(a){var c=h.createApplication(a,l);m.push(c),b(c),g(c)}),k(m),m.forEach(function(a){g(a)})),i(c.createTree(m),m)}}};b.exports=g},{"../utils/index":60,"sc-utils":22}],42:[function(a,b){var c=a("../parser/component"),d=a("../conf"),e=a("sc-utils"),f=a("../utils/index"),g=function(a,b,g,h,i,j){var k=function(a,b){var c=a.properties||{},d=f.extractProperties(b);for(var e in d)d.hasOwnProperty(e)&&(c[e]=d[e]);for(var g in a)a.hasOwnProperty(g)&&(c[g]=a[g]);return c},l=function(a,c){if(!a.el||!a.el.__speak){var d,f,h=b.find(a.key)||{},l=k(a,h),m=e.string.uniqueId(),n=g.find(h.presenter||a.presenter);return n&&n.make?d=n.make(h,a.el,c,l):(f=i.make(n,h,a.el,c,l),d=new f(l,c,a.el,j)),a.el&&(a.el.__speak=!0,a.el.__domID=m),d.id=a.id,d.__domID=m,d.type=a.type,d.name=a.name,d.el=a.el,d.app=c,d.parent=a.parent,d.template=a.template||a.id,d}},m=function(a,b,c){return function(b){b[a]&&(c?b[a](b):b[a]())}},n=function(a,b){var c=[];return a.forEach(function(a){var f=l(a,b);if(f&&(f.el.hasAttribute(d.cloak)&&f.el.removeAttribute(d.cloak),c.push(f),!f.parent||f.depricated)){var g=b[f.id];g?e.is.an.array(g)?g.push(f):b[f.id]=[g,f]:b[f.id]=f}}),c};return{exposeComponent:l,componentPipeline:function(b,d){d||(d=b.el);var g=c.parse(d),h=a.slice(0);if(!e.array.contains(h,"initialize"))throw new Error("you must have a initialize method in your lifeCycle");for(;"initialize"!==h[0];){var i=h.shift();g.forEach(m(i,b,!0))}var j=n(g,b);for(b.components=b.components||[],b.components=b.components.concat(j),h.shift();h.length;){var k=h.shift();j.forEach(m(k,b))}return f.createTree(j,"id",!0)}}};b.exports=g},{"../conf":33,"../parser/component":51,"../utils/index":60,"sc-utils":22}],43:[function(a,b){var c=function(a){return{initializeComponent:function(b){a.each(function(a){a.extendComponent&&a.extendComponent(b)})},initializeApplication:function(b){a.each(function(a){a.extendApplication&&a.extendApplication(b)})}}};b.exports=c},{}],44:[function(a,b){var c=a("../utils/index"),d=function(a){if(!a)throw new Error("Template engine has not been set");var b={};return{get:function(a,d){var e=b[a];return e?d(e):void c.xhr({type:"GET",url:a,cb:function(c){return b[a]=c,d(c)}})},tmp:{compile:function(){return a.compile.apply(this,arguments)},original:a}}};b.exports=d},{"../utils/index":60}],45:[function(a,b){var c=a("../utils/index"),d=a("../utils/class"),e=a("../utils/inheritance"),f=a("../utils/events");b.exports=function(a){var b=function(a){c.initializeProperties(this,a),this.__parameterTemplates=a||{},this.defineProperties()};return e.extend(b.prototype,d(a)),e.extend(b.prototype,f),b}},{"../utils/class":58,"../utils/events":59,"../utils/index":60,"../utils/inheritance":61}],46:[function(a,b){var c=a("../utils/index"),d=a("../utils/inheritance"),e=a("../utils/class"),f=a("../utils/events"),g=a("../utils/DOM"),h=function(a,b){var h=function(){};return h.prototype.constructor=function(b,d,e,f){if(this.el=e,this._s=f,this.app=d,this.id=b.id,this.name=b.name,this.children=[],this.parent=b.parent,this.__properties={},this.__parameterTemplates=b.properties||{},c.initializeProperties(this,b),this.initialize.apply(this,arguments),a.initializeComponent(this),this.defineProperties(),this.listen)for(var g in this.listen)if(this.listen.hasOwnProperty(g)){if(-1===g.indexOf(":$this"))return;var h=g.replace("$this",this.id);this.app.on(h,this[this.listen[g]],this)}},h.prototype.initialize=function(){},h.prototype.initialized=function(){},h.prototype.render=function(a){if(this.hasTemplate){var b,c=this,d=this.template||this.type||void 0,e=c.serialize?c.serialize():c;return this._s.template.get(d,function(d){var f=c._s.tmpl.compile(d);return b=f(e),!b&&a?a(b):(c.el.appendChild(g.createDomElement(b)),c.el=c.el.firstChild,c.appendTo&&c.appendTo.appendChild(c.el),a?a(b):void 0)}),this}},h.prototype.serialize=function(){var a={};for(var b in this)if("template"!==b&&"render"!==b&&"serialize"!==b&&"placeholder"!==b&&"app"!==b){var c=this[b];"function"!=typeof c&&(a[b]=c)}return a},d.extend(h.prototype,e(b)),d.extend(h.prototype,f),h};b.exports=h},{"../utils/DOM":55,"../utils/class":58,"../utils/events":59,"../utils/index":60,"../utils/inheritance":61}],47:[function(a,b){var c=a("../utils/index"),d=a("../utils/class"),e=a("../utils/inheritance");b.exports=function(a){var b=function(a){c.initializeProperties(this,a),this.__parameterTemplates={},this.defineProperties()};return e.extend(b.prototype,d(a)),b}},{"../utils/class":58,"../utils/index":60,"../utils/inheritance":61}],48:[function(a,b){var c=function(a,b,c){this.propertyName=c,this.value=a,this.component=b,this.initialize.apply(this,arguments)};c.prototype.__type="Property",c.prototype.initialize=function(){},c.prototype.set=function(){throw new Error("read only property")},c.prototype.get=function(){return this.value},b.exports=c},{}],49:[function(a,b){var c=a("sc-utils"),d=function(a){this.name=a,this.dependencies=[],this.stores={}};d.prototype.create=function(a,b,d){var e=this,f=d,g=b;1===arguments.length&&(g=a,this.isPageCode&&c.is.a.function(g)||(f=g.name),a=void 0),2!==arguments.length||c.is.an.array(a)||(g=a,a=void 0,f=b),!d&&2===arguments.length&&c.is.an.array(a)&&(c.is.a.function(b)||(f=b.name)),d||f||(f="app"),this.stores[f]=g||{},this.stores[f].deps=a,c.is.an.array(a)?e.dependencies.push(a):a&&e.dependencies.push([a])},d.prototype.flush=function(){this.dependencies=[],this.stores={}},d.prototype.find=function(a){if(c.is.a.function(a)){var b=[];return this.each(function(c){a(c)&&b.push(c)}),b[0]}return this.stores[a]},d.prototype.deps=function(){return this.dependencies},d.prototype.each=function(a){for(var b in this.stores)this.stores.hasOwnProperty(b)&&a(this.stores[b])},d.prototype.keys=function(){var a=Object.keys(this.stores),b=[];for(var c in a)a.hasOwnProperty(c)&&b.push([a[c]]);return b},d.prototype.bundledScripts=function(){var a=[],b=function(b){a.push(b)};for(var d in this.stores)if(this.stores.hasOwnProperty(d)){var e=this.stores[d];e.script&&(c.is.an.array(e.script)?e.script.forEach(b):a.push(e.script))}return a},d.prototype.build=function(a){var b=this;a.forEach(function(a){if(!b.stores[a.key]&&(b.stores[a.key]=a,a.presenterScript)){var c=[];b.dependencies.forEach(function(b){b.forEach(function(b){for(var d=a.presenterScript.length,e=0;d>e;e++)a.presenterScript[e]===b&&c.push(e)})}),c.forEach(function(b){a.presenterScript.splice(b,1)}),a.presenterScript.length>0&&b.dependencies.push(a.presenterScript)}})},d.prototype.scripts=function(){var a=[];for(var b in this.stores)this.stores.hasOwnProperty(b)&&this.stores[b].script&&(c.is.an.array(this.stores[b].script)?a=a.concat(this.stores[b].script):a.push(this.stores[b].script));return a},b.exports=d},{"sc-utils":22}],50:[function(a,b){var c=a("../conf"),d=a("../utils/DOM"),e=d.findApps,f=d.getDepth,g=d.findParentApp,h=(d.findNestedApplications,d.findPageCode),i={parse:function(a){var b=[];return e(a).forEach(function(a){var d=g(a),e=void 0,i=h(a);return d&&(e=d.getAttribute(c.APP_KEY)||"app"),b.push({el:a,key:a.getAttribute(c.APP_KEY)||"app",depth:f(a),components:[],parent:e,pageCode:i})}),b}};b.exports=i},{"../conf":33,"../utils/DOM":55}],51:[function(a,b){var c=a("../conf"),d=a("../utils/index"),e=a("../utils/DOM"),f=e.findComponents,g=e.findParentComponent,h=e.getDepth,i=function(a){var b,e,f=a.getAttribute(c.TYPE),i=h(a),j=a.getAttribute(c.ID),k=g(a),l=a.getAttribute(c.SCRIPT),m=a.getAttribute(c.TEMPLATE),n=a.hasAttribute(c.PRESENTER),o=a.getAttribute(c.PRESENTER),p=a.getAttribute(c.PROPERTIES),q=a.hasAttribute(c.TEMPLATE);if(l&&(l=l.split(",")),n&&o){var r=d.removeFileExtensionIfNeeded(o);r.toLowerCase()!==c.defaultPresenter.toLowerCase()&&(b=[r]),e=o.substring(o.lastIndexOf("/")+1,r.length)}if(!n){if(!l)return void 0;e="SpeakPresenter",f=l.join(",")}return{el:a,id:j,depth:i,key:f||"generic",parent:k?k.getAttribute(c.ID):void 0,script:l,template:m,properties:p?JSON.parse(p):void 0,hasTemplate:q,presenter:e?e:void 0,presenterScript:b?b:void 0}},j=function(a){return a},k={parse:function(a){var b=f(a);return d.sortByDepth(b.map(i).filter(j))}};b.exports=k},{"../conf":33,"../utils/DOM":55,"../utils/index":60}],52:[function(a,b){var c=a("./pageCode"),d=a("./component"),e=a("./app"),f=a("./plugin"),g={parse:function(a){var b=d.parse(a),g=e.parse(a),h=c.parse(a),i=f.parse(a);return{components:b,applications:g,pageCodes:h,plugins:i}}};b.exports=g},{"./app":50,"./component":51,"./pageCode":53,"./plugin":54}],53:[function(a,b){var c=a("../conf"),d=a("../utils/DOM"),e=d.findParentApp,f=d.findPageCodes,g={parse:function(){var a=[];return f().forEach(function(b){var d=e(b),f=b.getAttribute("src");d||(d=document);var g=d.getAttribute(c.APP_KEY);g||(g="app"),a.push({el:b,id:d.getAttribute(c.APP_KEY),key:g,script:[f]})}),a}};b.exports=g},{"../conf":33,"../utils/DOM":55}],54:[function(a,b){var c=a("../conf"),d=a("../utils/DOM"),e=d.findPlugins,f={parse:function(){var a=[];
return e().forEach(function(b){var d=b.getAttribute(c.SCRIPT);a.push({el:b,key:b.getAttribute(c.PLUGIN_ID),script:[d]})}),a}};b.exports=f},{"../conf":33,"../utils/DOM":55}],55:[function(a,b){var c=a("sc-utils").array.toArray,d=a("../conf"),e="undefined"!=typeof window,f=e?window:b.exports,g=f.document;if(e)var h=g.createElement("table"),i=g.createElement("tr"),j={tr:g.createElement("tbody"),tbody:h,thead:h,tfoot:h,td:i,th:i,"*":g.createElement("div")},k=/^\s*<(\w+|!)[^>]*>/;var l={findApps:function(a){var b=a?a:document;return c(b.querySelectorAll(d.ATTR_APP))},findComponents:function(a){var b=a?a:document;return c(b.querySelectorAll(d.ATTR_COMPONENT))},findPageCodes:function(a){var b=a?a:document;return c(b.querySelectorAll(d.ATTR_PAGECODE))},findPageCode:function(a){var b=a?a:document;return b.querySelector(d.ATTR_PAGECODE)},findPlugins:function(a){var b=a?a:document;return c(b.querySelectorAll(d.ATTR_PLUGIN))},getDepth:function(a,b){var c=a,d=null,e=0;for(b&&(d=b.id);c.parentNode!==d;)c=c.parentNode,e++;return e},findParentApp:function(a){do if(a=a.parentNode,a.hasAttribute&&a.hasAttribute(d.APP_KEY))return a;while(a.parentNode);return null},findParentComponent:function(a){do{if(a=a.parentNode,a.hasAttribute&&a.hasAttribute(d.ID)&&a.hasAttribute(d.NESTED))return a;if(a.hasAttribute&&a.hasAttribute(d.APP_KEY))return null}while(a.parentNode);return null},findNestedApplications:function(a){return c(a.querySelectorAll(d.ATTR_APP))},createDomElement:function(a){var b,c,d;if(!a)return document.createElement("div");d=k.test(a)&&RegExp.$1,d in j||(d="*"),c=j[d],c.innerHTML=""+a,b=c.childNodes;var e=Array.prototype.slice.call(c.childNodes);return e},addCss:function(a){var b=document.createElement("style");b.type="text/css",b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a)),document.getElementsByTagName("head")[0].appendChild(b)},addCloak:function(){this.addCss("*["+d.cloak+"] { display:none; !important }")},findMetaLang:function(){var a=document.querySelector("meta[data-sc-name=sitecoreLanguage]");if(a)return a.getAttribute("data-sc-content")},findAntiForgeryToken:function(){var a=document.querySelectorAll("input[name=__RequestVerificationToken]");return a?0===a.length?void 0:a[0].value:void 0}};b.exports=l},{"../conf":33,"sc-utils":22}],56:[function(a,b){b.exports={get:function(a,b){var c=function(c){console.log(c),b({error:"Something went wrong when loading: "+a})};request=new XMLHttpRequest,request.open("GET",a,!0),request.onload=function(){request.status>=200&&request.status<400?(resp=request.responseText,b({result:resp,error:null})):c()},request.onerror=c,request.send()}}},{}],57:[function(a,b){var c=a("sc-utils"),d=a("../utils/ajax"),e=a("../utils/DOM");b.exports={closeDialog:function(a){window.top.returnValue=a,window.top.dialogClose(a)},remove:function(a){c.is.a.string(a)&&(a=this.el.querySelector(a)),a=a||this.el;var b=this,d=function(a){var d=function(b){return a.__domID===b.__domID},e=c.array.find(b.children,d);e&&(e.remove(),b.children=b.children.filter(d))},f=function(a){var d=function(b){return a.__domID===b.__domID},e=c.array.find(b.components,d);if(e){e.destroy&&e.destroy();var f=b[e.id];f&&(c.is.an.array(f)?b[e.id]=b[e.id].filter(d):delete b[e.id]),b.components=b.components.filter(d)}},g=e.findApps(a);g&&g.forEach(d);var h=e.findComponents(a);return h&&h.forEach(f),a.innerHTML="",b},sendMessage:function(a){window.top.receiveMessage(a,root.getParameterByName("sp"))},findComponent:function(a){var b,c,d=this.components,e=this.children;return d.forEach(function(d){c||d.id!==a||(c=!0,b=d)}),!b&&e&&e.length&&e.forEach(function(d){c||(b=d.findComponent(a),c=!0)}),b},findApplication:function(a){var b,c,d=this.children||[];return a?this.key===a?this:(d.forEach(function(d){if(!c){var e=d.findApplication(a);e&&(c=!0,b=e)}}),b):null},replace:function(a,b){a.el=a.el?this.el.querySelector(a.el):this.el,this.remove(a.el),this.inject(a,b)},append:function(a,b){c.is.an.object(a)?a.el=a.el?this.el.querySelector(a.el):this.el:a={html:a,el:this.el},a.append=!0,this.inject(a,b)},prepend:function(a,b){c.is.an.object(a)?a.el=a.el?this.el.querySelector(a.el):this.el:a={html:a,el:this.el},a.prepend=!0,this.inject(a,b)},insertRendering:function(a,b,f){var g=(window.Sitecore.Speak,this),h="",i=e.findMetaLang(),j=i?i:"",k="core",l={database:k,path:"/",lang:j};c.is.a.function(b)?f=b:b&&(l=c.object.extend(l,b)),l.name||(l.name=c.string.uniqueId("subapp_")),l.lang&&(h="&sc_lang="+j),d.get(l.path+"?sc_itemid="+a+"&sc_database="+l.database+h,function(a){g.insertMarkups(a.result,l.name,l,f)})},insertMarkups:function(a,b,d,e){var f={prepend:!1,el:d.el,html:a};f=c.object.extend(f,d),f.el||(f.el=f.selector?document.querySelectorAll(d.selector):document.body),this.inject(f,e)}}},{"../utils/DOM":55,"../utils/ajax":56,"sc-utils":22}],58:[function(a,b){var c=a("../utils/propertyHelper"),d=a("sc-utils"),e=a("../factory/Property");b.exports=function(a){return{get:function(a){a=d.is.capitalize(a)?a:d.string.capitalize(a);var b=this.__properties[a];return b&&"Property"===b.__type?b.get(a):b},set:function(a,b,c){a=d.is.capitalize(a)?a:d.string.capitalize(a);var e,f=this.__properties[a];e=f&&"Property"===f.__type&&f.isNew?f.isNew(b):f!==b,e&&(c||this.trigger("beforeChange:"+a,this.get(a)),f&&"Property"===f.__type?f.set(b):this.__properties[a]=b,c||this.trigger("change:"+a,this.get(a)))},defineProperties:function(){this.__properties=this.__properties||{};for(var a in this.__parameterTemplates)c.isProperty(this.__parameterTemplates,a)&&this.defineProperty(a,this.__parameterTemplates[a])},defineProperty:function(b,f){var g=this,h=f,i=c.getCustomType(b),j=i.type?a.find(i.type):void 0,k=i.type?i.property:b;if(i.type){var l=e.make(j);this.__properties[d.string.capitalize(k)]=new l(h,this,b)}else this.__properties[d.string.capitalize(k)]=h;Object.defineProperty(this,k,{get:function(){return g.get(k)},set:function(a){g.set(k,a)},enumerable:!0})}}}},{"../factory/Property":35,"../utils/propertyHelper":63,"sc-utils":22}],59:[function(a,b){var c=a("sc-utils"),d=/\s+/,e=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}},f=function(a,b,e,f){if(!e)return!0;if("object"==typeof e){for(var g in e)a[b].apply(a,[g,e[g]].concat(f));return!1}if(d.test(e)){for(var h=e.split(d),i=0,j=h.length;j>i;i++){var k=h[i];k=k.split(":"),k[1]=c.string.capitalize(k[1]),a[b].apply(a,[k.join(":")].concat(f))}return!1}return!0},g={on:function(a,b,d){if(!f(this,"on",a,[b,d])||!b)return this;if(this._events||(this._events={}),a.indexOf(":")>0){var e=a.split(":");e[1]=c.string.capitalize(e[1]),a=e.join(":")}var g=this._events[a]||(this._events[a]=[]);return g.push({callback:b,context:d,ctx:d||this}),this},once:function(a,b,d){if(!f(this,"once",a,[b,d])||!b)return this;var e=this,g=c.function.once(function(){e.off(a,g),b.apply(this,arguments)});return g._callback=b,this.on(a,g,d)},off:function(a,b,d){var e,g,h,i,j,k,l,m;if(!this._events||!f(this,"off",a,[b,d]))return this;if(!a&&!b&&!d)return this._events={},this;if(a.indexOf(":")>0){var n=a.split(":");n[1]=c.string.capitalize(n[1]),a=n.join(":")}for(i=a?[a]:Object.keys(this._events),j=0,k=i.length;k>j;j++)if(a=i[j],h=this._events[a]){if(this._events[a]=e=[],b||d)for(l=0,m=h.length;m>l;l++)g=h[l],(b&&b!==g.callback&&b!==g.callback._callback||d&&d!==g.context)&&e.push(g);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=Array.prototype.slice.call(arguments,1);if(!f(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.change;return c&&e(c,b),d&&e(d,arguments),this},stopListening:function(a,b,c){var d=this._listeningTo;if(!d)return this;var e=!b&&!c;c||"object"!=typeof b||(c=this),a&&((d={})[a._listenId]=a);for(var f in d)a=d[f],a.off(b,c,this),(e||0===Object.keys(a._events))&&delete this._listeningTo[f];return this}},h={listenTo:"on",listenToOnce:"once"};for(var i in h){var j=h[i],k=i;g[k]=function(a,b,d){var e=this._listeningTo||(this._listeningTo={}),f=a._listenId||(a._listenId=c.string.uniqueId("l"));return e[f]=a,d||"object"!=typeof b||(d=this),a[j](b,d,this),this}}b.exports=g},{"sc-utils":22}],60:[function(a,b){var c=a("../conf"),d=a("sc-utils"),e=Array.prototype,f=(e.forEach,e.slice,function(a){var b=a.type,c=a.url,d=a.data,e=a.cb,f=new XMLHttpRequest;f.open(b,c,!0),"post"===b.toLowerCase()&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send("post"===b?JSON.stringify(d):null),f.onreadystatechange=function(){4===f.readyState&&(200===f.status||0===f.status?e(f.responseText):console.log("Error: "+f.responseText))}}),g=function(){console.log(arguments)},h=function(a,b){var c=document.createElement("script");c.src=a,c.onload=function(){b()},c.onerror=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(c)},i=function(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];"function"!=typeof proto&&(b[c]=d)}return b},j=function(a){var b={};for(var c in a){var d=a[c];"function"==typeof d&&"initialize"!==c&&"constructor"!==c&&(b[c]=d)}return b},k=function(a,b){for(var c in b)b.hasOwnProperty(c)&&!d.is.a.function(b[c])&&(a[c]=b[c])},l=function(a,b){return a.depth<b.depth?-1:a.depth>b.depth?1:0},m=function(a){return a.sort(l).reverse()},n=function(a){var b=c.ROOTSTATICURL?c.ROOTSTATICURL:window.location.origin+"/",d="/-/speak/v1/bundles/bundle.js?d=1&c=1&n=1&f=";return[b+d+a.join(",")]},o=function(a,b,c){for(var d,e=a.length,f=b?b:"key",g={},h=[],i=0;e>i;i++)g[a[i][f]]=i,a[i].children=[];for(var j=0;e>j;j++)if(d=a[j],d.parent){var k=g[d.parent];if(k){var l=a[k];if(d.parent=l?l:void 0,l){var m=d.PageCodeObject||d;if(l.children.push(m),c){if(l[m[b]])throw new Error("Conflicting id for "+b+"in object "+m.id);l[m[b]]=m}}}}else h.push(d.PageCodeObject||d);return h},p=function(a){return a=a.trim(),/.js$/i.test(a)&&(a=a.slice(0,-3)),a};b.exports={attachScript:h,extractProto:j,xhr:f,extractProperties:i,initializeProperties:k,buildModRequest:n,sortByDepth:m,createTree:o,removeFileExtensionIfNeeded:p,security:a("./security")}},{"../conf":33,"./security":64,"sc-utils":22}],61:[function(a,b){var c=a("sc-utils"),d={wrap:function(a,b){var d=function(a){return function(){a.apply(this,arguments)}}(a.prototype.constructor);for(var e in a.prototype)a.prototype.hasOwnProperty(e)&&(d.prototype[e]=a.prototype[e]);b.prototype&&(b=b.prototype);for(var f in b)d.prototype[f]=d.prototype[f]&&c.is.a.function(b[f])?function(a,b){return function(){b.apply(this,arguments),a.apply(this,arguments)}}(a.prototype[f],b[f]):b[f];return d},extend:function(a){return Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a}};b.exports=d},{"sc-utils":22}],62:[function(a,b){var c=a("./DOM");b.exports=function(a,b,d){return{setupInjectMethod:function(e){return function(f,g){var h=this,i=f.el,j=f.html,k=f.append,l=f.replace,m=f.prepend;if(k||m||l||(k=!0),!h||!i||!j)throw new Error("incorrect parameter passed");var n=c.createDomElement(),o=c.createDomElement(j);o.forEach(function(a){n.appendChild(a)});var p=b.parse(n);k||l?(l&&(i.innerHTML=""),o.forEach(function(a){i.appendChild(a)})):o.reverse().forEach(function(a){i.parentNode.insertBefore(a,i)});var q=function(a){a&&(h.children=h.children||[],h.children=h.children.concat(a)),Sitecore.Speak.applications=Sitecore.Speak.applications.concat(a),g&&g(h),h.trigger("change",h)};d.build(p),a.load(d,function(){e.call(h,i,q)})}}}}},{"./DOM":55}],63:[function(a,b){var c=[],d=function(a){return a===Object(a)},e=function(a,b){var e,f,g=a[b];return c.forEach(function(a){a===b&&(e=!0)}),e?!1:(g||(g=""),f=g.toString(),Array.isArray(g)?!0:!d(g)&&"[object Function]"!==f&&"[object RegExp]"!==f)},f={isProperty:function(a,b,d){return c=d||[],a.hasOwnProperty(b)&&e(a,b)},getCustomType:function(a){return-1===a.indexOf(":")?{type:void 0,property:a}:{type:a.split(":")[1],property:a.split(":")[0]}}};b.exports=f},{}],64:[function(a,b){var c=a("./DOM"),d=c.findAntiForgeryToken(),e="__RequestVerificationToken";b.exports={antiForgery:{getAntiForgeryToken:function(){return{formKey:e,headerKey:"X-RequestVerificationToken",value:d}}}}},{"./DOM":55}]},{},[39])(39)});