/**!
 *
 * scBindingPlugin
 *
 * Built: Wed Jun 25 2014 16:14:16 GMT+0100 (GMT Daylight Time)
 * PackageVersion: 0.1.1
 *
 */

!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(){!function(){var a="undefined"!=typeof window,b=(a&&window.Sitecore?window.Sitecore.Speak:requirejs("boot"),{}),c=function(a){return a===Object(a)},d=function(a){return"function"==typeof a},e=Sitecore.Speak.isDebug(),f=function(a,b){b||(b="log"),e&&console[b](a)},g=function(a){return a.charAt(0).toLowerCase()+a.slice(1)},h=function(a,b){var c;return a.components.forEach(function(a){c||a.id!==b||(c=a)}),c},i=function(a){var c=b[a];return c?c:void 0},j=function(a){if(a.converter){var b=[];return _.each(a.from,function(a){b.push(a.model[a.attribute])}),a.converter(b)}var c=a.from[0].component,e=a.from[0].attribute;return d(c.get)?(c.depricated&&(e=g(e)),value=c.get(e)):value=c[e],f("      we set the value to: "+value),value},k=function(a,b,d){var e=a,f=b,g=[];return f?(Object.keys(f).forEach(function(b){var j,k,l={from:[],to:b,converter:void 0,component:e},m=f[b];if(c(m))if(f.length){var n=function(c){j=d||h(a.app,c.split(".")[0]),g.push({from:[{component:j,attribute:c.split(".")[1]}],to:b,converter:void 0,component:e})};f.forEach(n)}else l.converter=i(m),m.parameters.forEach(function(b){j=d||h(a.app,b.split(".")[0]),k=b.split(".")[1],l.from.push({component:j,attribute:k})}),g.push(l);else{var o=m.split(".")[0];if(j=d||h(a.app,o),!j)throw new Error("Could not find Component "+o+" when applying binding from "+a.id);k=m.split(".")[1],l.from.push({component:j,attribute:k}),g.push(l)}}),g):g},l=function(a,b,c){var e=k(a,b,c);0!==e.length&&e.forEach(function(a){f("Applying bindings for the component: "+a.component.id),f("  for the property: "+a.to),a.component.depricated&&(a.to=g(a.to)),a.from.forEach(function(b){f("    We initialize the value from the component: "+b.component.id),b.component.depricated&&(b.attribute=g(b.attribute)),d(a.component.set)?a.component.set(a.to,j(a)):a.component[a.to]=j(a);var c=function(){f("We have received a change from "+b.component.id+":"+a.to+", so we update the value for: "+a.component.id+"."+a.to),d(a.component.set)?a.component.set(a.to,j(a)):a.component[a.to]=j(a)};if(b.component.subscribe)b.component.subscribe("change:"+b.attribute,c);else{if(b.component.subscribe||!b.component.on)throw new Error("Component "+b.component.id+" not suited for Bindings");b.component.on("change:"+b.attribute,c)}})})},m=function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=function(b){var e=h(c,b.split(".")[0]),f={},g=b.split(".")[1];f[g]="data."+d,l(e,f,a)};Array.isArray(e)?e.forEach(f):f(e)}},n=function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=function(b){var e=h(c,b.split(".")[0]),f=b.split(".")[1];e[f]=a[d]};Array.isArray(e)?e.forEach(f):f(e)}};Sitecore.Speak.module("bindings",{applyBindings:function(a,b,c){var d=b.data;if(d){var e=h(c,d.split(".")[0]);e.set?e.set(d.split(".")[1],a):e[d.split(".")[1]]=a}else a.app=c,n(a,b,c),l(a,b),m(a,b,c)},createBindingConverter:function(a){if(!a.name||!a.convert)throw"invalid binding converter";if(b[a.name])throw"already a converter with the same name";b[a.name]=a.convert}}),Sitecore.Speak.module("bindings").createBindingConverter({name:"Has",convert:function(a){return a&&a[0]?_.isArray(a[0])&&0===a[0].length?!1:!0:!1}}),Sitecore.Speak.module("bindings").createBindingConverter({name:"Not",convert:function(a){return!(a&&a[0])}}),Sitecore.Speak.plugin({name:"bindings",extendApplication:function(a){a.components.forEach(function(a){var b=a.el.getAttribute("data-sc-bindings");b&&l(a,JSON.parse(b))})}})}(this)},{}]},{},[1]);