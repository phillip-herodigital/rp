!function(){var a="undefined"!=typeof window,b=a?window:global,c=b.Sitecore.Speak,d={userProfileApiUrl:"/api/sitecore/Settings/",userProfileApiUpdateMethod:"SetUserProfileKey"},e=function(a,b,e){if(!a)throw new Error("Please provide a valid userProfileKey");if(b&&!c.utils.is.an.object(b))throw new Error("Please provide a valid state to the UserProfileState property - the state must be an object");var f=JSON.stringify(b),g=c.utils.security.antiForgery.getAntiForgeryToken(),h={url:d.userProfileApiUrl+d.userProfileApiUpdateMethod,type:"POST",dataType:"text",data:{key:a,value:f}};h.data[g.formKey]=g.value;$.ajax(h).done(e)};a&&Sitecore?Sitecore.Speak.module("userProfile",{saveState:e}):exports=module.exports=UserProfile}();