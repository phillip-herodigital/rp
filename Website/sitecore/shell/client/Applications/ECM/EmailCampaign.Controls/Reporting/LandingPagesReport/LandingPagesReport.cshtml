@using Sitecore.Mvc
@using EmailCampaign.Controls
@using Sitecore.Web.UI.Controls.Common.Renderings
@using Sitecore.Web.UI.Controls.Common.UserControls
@using UserControl = Sitecore.Web.UI.Controls.Common.UserControls.UserControl
@using Bcl = EmailCampaign.Controls.Constants.Renderings.Bcl
@using Exm = EmailCampaign.Controls.Constants.Renderings.Exm
@using DataSources = EmailCampaign.Controls.Reporting.LandingPagesReport.DataSources;
@model Sitecore.Mvc.Presentation.RenderingModel
@{
    UserControl rendering = Html.Sitecore().Controls().GetUserControl(Model.Rendering);
    rendering.Requires.Script("ecm", "LandingPagesReport.js");
    rendering.Requires.Css("ecm", "LandingPagesReport.css");
    rendering.Class = "sc-LandingPagesReport";
    string bottomLink = rendering.GetString("BottomLink");
    string height = rendering.GetString("Height");
}

@helper RenderLandingPages(UserControl rendering)
{
    RenderingHelper helper = new RenderingHelper(this.Html, rendering.ControlId);

    helper.CreateRenderingAt(Bcl.StringDictionary, "StringDictionary", rendering.ControlId + "Card", null, DataSources.StringDictionary, "Wrapper.Content");
    helper.CreateRenderingAt(Bcl.LandingInfo, "LandingInfoMostValuable", rendering.ControlId + "Card", null, DataSources.LandingInfoMostValuable, "Wrapper.Content");
    helper.CreateRenderingAt(Bcl.LandingInfo, "LandingInfoMostRelevant", rendering.ControlId + "Card", null, DataSources.LandingInfoMostRelevant, "Wrapper.Content");
    helper.CreateRenderingAt(Bcl.LandingInfo, "LandingInfoMostClicked", rendering.ControlId + "Card", null, DataSources.LandingInfoMostClicked, "Wrapper.Content");
}

@RenderLandingPages(rendering)

<div @rendering.HtmlAttributes data-sc-hasnested="true">
    @(this.Html.Sitecore().Controls().Rendering(this.Html, Bcl.Card, rendering.ControlId + "Card", DataSources.Card, new
            {
                BottomLink = @bottomLink,
                Height = @height
            }))
</div>